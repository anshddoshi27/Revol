"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/onboarding/page",{

/***/ "(app-pages-browser)/./src/components/onboarding/availability-step.tsx":
/*!*********************************************************!*\
  !*** ./src/components/onboarding/availability-step.tsx ***!
  \*********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AvailabilityStep: function() { return /* binding */ AvailabilityStep; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarCheck2,ChevronLeft,ChevronRight,Save,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/calendar-check-2.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarCheck2,ChevronLeft,ChevronRight,Save,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/save.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarCheck2,ChevronLeft,ChevronRight,Save,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-left.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarCheck2,ChevronLeft,ChevronRight,Save,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-right.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarCheck2,ChevronLeft,ChevronRight,Save,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_helper_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/helper-text */ \"(app-pages-browser)/./src/components/ui/helper-text.tsx\");\n/* harmony import */ var _components_ui_label__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/label */ \"(app-pages-browser)/./src/components/ui/label.tsx\");\n/* harmony import */ var _components_onboarding_step_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/onboarding/step-actions */ \"(app-pages-browser)/./src/components/onboarding/step-actions.tsx\");\n/* harmony import */ var _components_onboarding_test_data_button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/onboarding/test-data-button */ \"(app-pages-browser)/./src/components/onboarding/test-data-button.tsx\");\n/* harmony import */ var _lib_test_data_generator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/test-data-generator */ \"(app-pages-browser)/./src/lib/test-data-generator.ts\");\n/* harmony import */ var _lib_timezone__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/timezone */ \"(app-pages-browser)/./src/lib/timezone.ts\");\n/* harmony import */ var _lib_availability_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/availability-utils */ \"(app-pages-browser)/./src/lib/availability-utils.ts\");\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/lib/supabase-client */ \"(app-pages-browser)/./src/lib/supabase-client.ts\");\n/* __next_internal_client_entry_do_not_use__ AvailabilityStep auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\nfunction AvailabilityStep(param) {\n    let { services, staff, defaultValues, onNext, onBack, timezone = \"America/New_York\" // Default timezone\n     } = param;\n    var _staff_find;\n    _s();\n    const [currentWeekStart, setCurrentWeekStart] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const today = new Date();\n        const dayOfWeek = today.getDay();\n        const diff = today.getDate() - dayOfWeek;\n        const sunday = new Date(today.setDate(diff));\n        sunday.setHours(0, 0, 0, 0);\n        return sunday;\n    });\n    const [selectedServiceId, setSelectedServiceId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedStaffId, setSelectedStaffId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"any\"); // \"any\" means show all staff\n    const [fetchedSlots, setFetchedSlots] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isSavingAvailability, setIsSavingAvailability] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Track saved availability during this onboarding session\n    const [savedAvailability, setSavedAvailability] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Pending availability additions - slots clicked but not yet saved\n    const [pendingAvailabilityAdditions, setPendingAvailabilityAdditions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Get all services for dropdown\n    const allServices = services.flatMap((category)=>category.services.map((service)=>({\n                ...service,\n                categoryName: category.name\n            })));\n    // When service changes, load saved availability for that service\n    // This ensures saved slots persist when switching between services\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!selectedServiceId) {\n            setFetchedSlots([]);\n            return;\n        }\n        const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n        if (!selectedService) {\n            setFetchedSlots([]);\n            return;\n        }\n        // Check if we have saved availability for this service in state\n        const serviceAvail = savedAvailability.find((avail)=>avail.serviceId === selectedServiceId);\n        if (serviceAvail) {\n            // Expand saved slots for this service\n            const weekStart = new Date(currentWeekStart);\n            weekStart.setHours(0, 0, 0, 0);\n            const expandedSlots = (0,_lib_availability_utils__WEBPACK_IMPORTED_MODULE_9__.buildExpandedSlots)({\n                service: selectedService,\n                serviceAvailability: serviceAvail,\n                staff: staff,\n                timezone: timezone,\n                startDate: weekStart,\n                horizonDays: 14,\n                includePastSlots: true\n            });\n            setFetchedSlots(expandedSlots);\n        } else {\n            // No saved availability for this service yet - start with empty calendar\n            setFetchedSlots([]);\n        }\n    }, [\n        selectedServiceId,\n        savedAvailability,\n        allServices,\n        staff,\n        timezone,\n        currentWeekStart\n    ]);\n    // Group slots by day - during onboarding, we only show pending slots and saved slots from this session\n    const groupedSlots = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!selectedServiceId) return {};\n        // Combine fetched slots (saved during this session) with any additional slots\n        return (0,_lib_availability_utils__WEBPACK_IMPORTED_MODULE_9__.groupSlotsByDay)(fetchedSlots, timezone);\n    }, [\n        fetchedSlots,\n        timezone,\n        selectedServiceId\n    ]);\n    // Generate days of the week\n    const weekDays = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const days = [];\n        for(let i = 0; i < 7; i++){\n            const date = new Date(currentWeekStart);\n            date.setDate(currentWeekStart.getDate() + i);\n            days.push(date);\n        }\n        return days;\n    }, [\n        currentWeekStart\n    ]);\n    // Generate hours from 8 AM to 8 PM (matching booking flow)\n    const hours = Array.from({\n        length: 13\n    }, (_, i)=>i + 8);\n    // Group availability slots by day and hour (including pending additions)\n    const slotsByDayAndHour = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const grouped = {};\n        // Flatten all slots from all days\n        const allSlots = Object.values(groupedSlots).flat();\n        // Add fetched slots\n        allSlots.forEach((slot)=>{\n            const slotDate = new Date(slot.startDateTime);\n            const dateKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(slotDate, timezone, \"yyyy-MM-dd\");\n            const hour = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(slotDate, timezone, {\n                hour: \"numeric\",\n                hour12: false\n            });\n            const hourNum = parseInt(hour, 10);\n            // Only include slots that are in the current week\n            const isInCurrentWeek = weekDays.some((day)=>{\n                const dayKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, \"yyyy-MM-dd\");\n                return dayKey === dateKey;\n            });\n            if (!isInCurrentWeek) return;\n            if (!grouped[dateKey]) {\n                grouped[dateKey] = {};\n            }\n            if (!grouped[dateKey][hourNum]) {\n                grouped[dateKey][hourNum] = [];\n            }\n            // Check for duplicates (same hour, same staff, same date)\n            const isDuplicate = grouped[dateKey][hourNum].some((existing)=>existing.staffId === slot.staffId && existing.startDateTime === slot.startDateTime);\n            if (!isDuplicate) {\n                grouped[dateKey][hourNum].push(slot);\n            }\n        });\n        // Add pending availability additions as visual slots\n        if (selectedServiceId) {\n            const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n            if (selectedService) {\n                pendingAvailabilityAdditions.forEach((pending)=>{\n                    const dateKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(pending.date, timezone, \"yyyy-MM-dd\");\n                    const hourNum = pending.hour;\n                    // Only include if in current week\n                    const isInCurrentWeek = weekDays.some((day)=>{\n                        const dayKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, \"yyyy-MM-dd\");\n                        return dayKey === dateKey;\n                    });\n                    if (!isInCurrentWeek) return;\n                    if (!grouped[dateKey]) {\n                        grouped[dateKey] = {};\n                    }\n                    if (!grouped[dateKey][hourNum]) {\n                        grouped[dateKey][hourNum] = [];\n                    }\n                    // Check if this pending slot already exists as pending (don't duplicate)\n                    const alreadyPending = grouped[dateKey][hourNum].some((existing)=>existing.staffId === pending.staffId && existing.id && existing.id.startsWith(\"pending-\"));\n                    if (!alreadyPending) {\n                        // Remove any saved slot for the same time/staff (pending replaces saved)\n                        grouped[dateKey][hourNum] = grouped[dateKey][hourNum].filter((existing)=>{\n                            var _existing_id;\n                            return !(existing.staffId === pending.staffId && !((_existing_id = existing.id) === null || _existing_id === void 0 ? void 0 : _existing_id.startsWith(\"pending-\")));\n                        });\n                        const staffMember = staff.find((s)=>s.id === pending.staffId);\n                        const startDateTime = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.zonedMinutesToDate)(pending.date, pending.hour * 60, timezone);\n                        const endDateTime = new Date(startDateTime.getTime() + selectedService.durationMinutes * 60 * 1000);\n                        grouped[dateKey][hourNum].push({\n                            id: \"pending-\".concat(pending.staffId, \"-\").concat(dateKey, \"-\").concat(hourNum),\n                            serviceId: selectedServiceId,\n                            staffId: pending.staffId,\n                            staffName: (staffMember === null || staffMember === void 0 ? void 0 : staffMember.name) || \"Unknown\",\n                            staffColor: (staffMember === null || staffMember === void 0 ? void 0 : staffMember.color) || \"#000000\",\n                            startDateTime: startDateTime.toISOString(),\n                            endDateTime: endDateTime.toISOString(),\n                            dayLabel: (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(pending.date, timezone, {\n                                weekday: \"long\"\n                            })\n                        });\n                    }\n                });\n            }\n        }\n        return grouped;\n    }, [\n        groupedSlots,\n        weekDays,\n        timezone,\n        pendingAvailabilityAdditions,\n        selectedServiceId,\n        allServices,\n        staff\n    ]);\n    const navigateWeek = (direction)=>{\n        const newDate = new Date(currentWeekStart);\n        newDate.setDate(newDate.getDate() + (direction === \"next\" ? 7 : -7));\n        setCurrentWeekStart(newDate);\n    };\n    const handleEmptySlotClick = (day, hour)=>{\n        if (!selectedServiceId) {\n            setError(\"Please select a service first\");\n            return;\n        }\n        const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n        if (!selectedService) {\n            setError(\"Service not found\");\n            return;\n        }\n        // Get staff members assigned to this service\n        const serviceStaff = staff.filter((member)=>{\n            if (member.active === false) return false;\n            return selectedService.staffIds.includes(member.id);\n        });\n        if (serviceStaff.length === 0) {\n            setError(\"No staff members assigned to this service\");\n            return;\n        }\n        // Determine which staff members to add/remove availability for\n        const staffToProcess = selectedStaffId !== \"any\" ? [\n            serviceStaff.find((m)=>m.id === selectedStaffId)\n        ].filter(Boolean) : serviceStaff;\n        if (staffToProcess.length === 0) {\n            return;\n        }\n        // Check if ALL selected staff already have this slot pending\n        const allPending = staffToProcess.every((member)=>pendingAvailabilityAdditions.some((pending)=>pending.staffId === member.id && pending.date.toDateString() === day.toDateString() && pending.hour === hour));\n        if (allPending) {\n            // Remove for all selected staff (toggle off)\n            setPendingAvailabilityAdditions((prev)=>prev.filter((pending)=>{\n                    const isSelectedStaff = staffToProcess.some((m)=>m.id === pending.staffId);\n                    return !(isSelectedStaff && pending.date.toDateString() === day.toDateString() && pending.hour === hour);\n                }));\n        } else {\n            // Add for all selected staff (or just the one selected)\n            const newAdditions = staffToProcess.filter((member)=>{\n                // Only add if not already pending\n                return !pendingAvailabilityAdditions.some((pending)=>pending.staffId === member.id && pending.date.toDateString() === day.toDateString() && pending.hour === hour);\n            }).map((member)=>({\n                    staffId: member.id,\n                    date: day,\n                    hour\n                }));\n            if (newAdditions.length > 0) {\n                setPendingAvailabilityAdditions((prev)=>[\n                        ...prev,\n                        ...newAdditions\n                    ]);\n            }\n        }\n        setError(null);\n    };\n    const handleSaveAvailability = async ()=>{\n        if (!selectedServiceId || pendingAvailabilityAdditions.length === 0) return true;\n        setIsSavingAvailability(true);\n        setError(null);\n        try {\n            // Get auth token from Supabase client\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_10__.createClientClient)();\n            const { data: { session } } = await supabase.auth.getSession();\n            const authToken = session === null || session === void 0 ? void 0 : session.access_token;\n            const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n            if (!selectedService) {\n                throw new Error(\"Selected service not found\");\n            }\n            // Use savedAvailability state (which has temporary IDs) as the base\n            // This ensures consistency - we don't mix real UUIDs from API with temporary IDs\n            // The API handles ID mapping when saving, but our state keeps temporary IDs\n            let allAvailability = [\n                ...savedAvailability\n            ];\n            // Find or create service availability entry for the current service\n            let serviceAvailability = allAvailability.find((avail)=>avail.serviceId === selectedServiceId);\n            if (!serviceAvailability) {\n                serviceAvailability = {\n                    serviceId: selectedServiceId,\n                    staff: []\n                };\n                allAvailability.push(serviceAvailability);\n            }\n            // Process all pending additions\n            for (const pending of pendingAvailabilityAdditions){\n                const targetDate = pending.date;\n                const targetHour = pending.hour;\n                const staffId = pending.staffId;\n                // Get weekday name from the date (timezone-aware)\n                // Store as lowercase to match buildExpandedSlots expectation and API format\n                const weekdayName = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(targetDate, timezone, {\n                    weekday: \"long\"\n                });\n                const weekday = weekdayName.toLowerCase();\n                // Format time as HH:mm\n                const startTime = \"\".concat(String(targetHour).padStart(2, \"0\"), \":00\");\n                // Calculate end time based on service duration\n                const startMinutes = targetHour * 60;\n                const endMinutes = startMinutes + selectedService.durationMinutes;\n                const endHour = Math.floor(endMinutes / 60);\n                const endMin = endMinutes % 60;\n                const endTime = \"\".concat(String(endHour).padStart(2, \"0\"), \":\").concat(String(endMin).padStart(2, \"0\"));\n                // Find or create staff availability entry\n                let staffAvailability = serviceAvailability.staff.find((s)=>s.staffId === staffId);\n                if (!staffAvailability) {\n                    staffAvailability = {\n                        staffId: staffId,\n                        slots: []\n                    };\n                    serviceAvailability.staff.push(staffAvailability);\n                }\n                // Check if this slot already exists\n                const slotExists = staffAvailability.slots.some((slot)=>slot.day === weekday && slot.startTime === startTime && slot.endTime === endTime);\n                if (!slotExists) {\n                    // Add the new slot\n                    staffAvailability.slots.push({\n                        id: \"slot-\".concat(Date.now(), \"-\").concat(Math.random()),\n                        day: weekday,\n                        startTime: startTime,\n                        endTime: endTime\n                    });\n                }\n            }\n            // Save all changes to API\n            const saveResponse = await fetch(\"/api/business/onboarding/step-7-availability\", {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...authToken && {\n                        \"Authorization\": \"Bearer \".concat(authToken)\n                    }\n                },\n                credentials: \"include\",\n                body: JSON.stringify({\n                    availability: allAvailability\n                })\n            });\n            if (!saveResponse.ok) {\n                const errorData = await saveResponse.json().catch(()=>({}));\n                throw new Error(errorData.error || \"Failed to save availability\");\n            }\n            // Update saved availability state with the data we just saved\n            // allAvailability already contains all services (merged from savedAvailability state)\n            // and now has the updated slots for the current service\n            // This preserves availability for all services with temporary IDs\n            setSavedAvailability(allAvailability);\n            // Expand the saved slots FIRST before clearing pending additions\n            // This ensures a smooth transition from pending to saved\n            const serviceAvail = allAvailability.find((avail)=>avail.serviceId === selectedServiceId);\n            if (selectedService && serviceAvail) {\n                // Start from the beginning of the current week to show all slots in the week view\n                const weekStart = new Date(currentWeekStart);\n                weekStart.setHours(0, 0, 0, 0);\n                const expandedSlots = (0,_lib_availability_utils__WEBPACK_IMPORTED_MODULE_9__.buildExpandedSlots)({\n                    service: selectedService,\n                    serviceAvailability: serviceAvail,\n                    staff: staff,\n                    timezone: timezone,\n                    startDate: weekStart,\n                    horizonDays: 14,\n                    includePastSlots: true // Show all slots in the current week view for onboarding\n                });\n                // Update fetchedSlots with saved slots BEFORE clearing pending\n                // This ensures saved slots appear immediately\n                setFetchedSlots(expandedSlots);\n            } else {\n                setFetchedSlots([]);\n            }\n            // Clear pending additions AFTER we've updated the saved slots\n            // This ensures slots switch from \"Pending\" to \"Saved\" smoothly\n            setPendingAvailabilityAdditions([]);\n            return true; // Success\n        } catch (error) {\n            console.error(\"Error saving availability:\", error);\n            setError(\"Failed to save availability: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n            return false; // Failure\n        } finally{\n            setIsSavingAvailability(false);\n        }\n    };\n    const handleContinue = async ()=>{\n        setError(null);\n        // Before continuing, save any pending availability\n        if (pendingAvailabilityAdditions.length > 0 && selectedServiceId) {\n            const saveSuccess = await handleSaveAvailability();\n            if (!saveSuccess) {\n                // Error already set by handleSaveAvailability\n                return; // Don't continue if save failed\n            }\n        }\n        // Convert saved availability to ServiceAvailability format\n        // Use saved availability from this session, or convert pending if nothing saved yet\n        let result = savedAvailability.length > 0 ? savedAvailability : [];\n        // If we have no saved availability but have pending, convert pending\n        if (result.length === 0 && pendingAvailabilityAdditions.length > 0 && selectedServiceId) {\n            result = mapPendingToServiceAvailability();\n        }\n        // Validate that services with staff have at least one slot\n        const servicesNeedingAvailability = result.filter((service)=>{\n            // Check if this service has staff assigned\n            const serviceDef = allServices.find((s)=>s.id === service.serviceId);\n            if (!serviceDef || serviceDef.staffIds.length === 0) return false;\n            // Check if all staff have slots\n            return service.staff.length > 0 && service.staff.every((staffEntry)=>staffEntry.slots.length === 0);\n        });\n        if (servicesNeedingAvailability.length) {\n            const serviceDef = allServices.find((s)=>s.id === servicesNeedingAvailability[0].serviceId);\n            setError('Add at least one availability slot for service \"'.concat((serviceDef === null || serviceDef === void 0 ? void 0 : serviceDef.name) || servicesNeedingAvailability[0].serviceId, '\". Each service with staff needs availability to appear in booking.'));\n            return;\n        }\n        await onNext(result);\n    };\n    const mapPendingToServiceAvailability = ()=>{\n        // This is a fallback if no current availability exists\n        // Convert pending additions to ServiceAvailability format\n        const result = [];\n        if (!selectedServiceId || pendingAvailabilityAdditions.length === 0) {\n            return result;\n        }\n        const serviceAvailability = {\n            serviceId: selectedServiceId,\n            staff: []\n        };\n        const staffMap = new Map();\n        const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n        if (!selectedService) return result;\n        for (const pending of pendingAvailabilityAdditions){\n            const staffId = pending.staffId;\n            const targetDate = pending.date;\n            const targetHour = pending.hour;\n            // Store weekday as lowercase to match buildExpandedSlots expectation and API format\n            const weekdayName = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(targetDate, timezone, {\n                weekday: \"long\"\n            });\n            const weekday = weekdayName.toLowerCase();\n            const startTime = \"\".concat(String(targetHour).padStart(2, \"0\"), \":00\");\n            const startMinutes = targetHour * 60;\n            const endMinutes = startMinutes + selectedService.durationMinutes;\n            const endHour = Math.floor(endMinutes / 60);\n            const endMin = endMinutes % 60;\n            const endTime = \"\".concat(String(endHour).padStart(2, \"0\"), \":\").concat(String(endMin).padStart(2, \"0\"));\n            if (!staffMap.has(staffId)) {\n                staffMap.set(staffId, []);\n            }\n            const slots = staffMap.get(staffId);\n            const slotExists = slots.some((slot)=>slot.day === weekday && slot.startTime === startTime && slot.endTime === endTime);\n            if (!slotExists) {\n                slots.push({\n                    id: \"slot-\".concat(Date.now(), \"-\").concat(Math.random()),\n                    day: weekday,\n                    startTime: startTime,\n                    endTime: endTime\n                });\n            }\n        }\n        for (const [staffId, slots] of staffMap.entries()){\n            serviceAvailability.staff.push({\n                staffId,\n                slots\n            });\n        }\n        if (serviceAvailability.staff.length > 0) {\n            result.push(serviceAvailability);\n        }\n        return result;\n    };\n    const handleFillTestData = async ()=>{\n        const testData = (0,_lib_test_data_generator__WEBPACK_IMPORTED_MODULE_7__.generateAvailabilityData)(services, staff);\n        // Save test data via API\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_10__.createClientClient)();\n            const { data: { session } } = await supabase.auth.getSession();\n            const authToken = session === null || session === void 0 ? void 0 : session.access_token;\n            const response = await fetch(\"/api/business/onboarding/step-7-availability\", {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...authToken && {\n                        \"Authorization\": \"Bearer \".concat(authToken)\n                    }\n                },\n                credentials: \"include\",\n                body: JSON.stringify({\n                    availability: testData\n                })\n            });\n            if (response.ok) {\n                setSavedAvailability(testData);\n                if (selectedServiceId) {\n                    const serviceAvail = testData.find((avail)=>avail.serviceId === selectedServiceId);\n                    const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n                    if (selectedService && serviceAvail) {\n                        const today = new Date();\n                        const expandedSlots = (0,_lib_availability_utils__WEBPACK_IMPORTED_MODULE_9__.buildExpandedSlots)({\n                            service: selectedService,\n                            serviceAvailability: serviceAvail,\n                            staff: staff,\n                            timezone: timezone,\n                            startDate: today,\n                            horizonDays: 14\n                        });\n                        setFetchedSlots(expandedSlots);\n                    }\n                }\n                setError(null);\n            }\n        } catch (error) {\n            console.error(\"Error filling test data:\", error);\n            setError(\"Failed to load test data\");\n        }\n    };\n    const monthYear = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(weekDays[0], timezone, {\n        month: \"long\",\n        year: \"numeric\"\n    });\n    const selectedService = allServices.find((s)=>s.id === selectedServiceId);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-8\",\n        \"aria-labelledby\": \"availability-step-heading\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"space-y-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"inline-flex items-center gap-2 rounded-full border border-primary/30 bg-primary/10 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-primary/90\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                className: \"h-4 w-4\",\n                                \"aria-hidden\": \"true\"\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 623,\n                                columnNumber: 11\n                            }, this),\n                            \"Step 7 \\xb7 Availability\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 622,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        id: \"availability-step-heading\",\n                        className: \"font-display text-3xl text-white\",\n                        children: \"Set availability by clicking time slots\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 626,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"max-w-3xl text-base text-white/70\",\n                        children: 'Select a service and staff member, then click empty time slots to add availability. Click again to remove. Click \"Save Availability\" when done, then continue to the next step. This availability will be used in your booking flow.'\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 629,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 621,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"rounded-3xl border border-white/10 bg-white/5 p-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_4__.Label, {\n                        className: \"text-white/70 mb-2 block\",\n                        children: \"Filter by Service\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 636,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        className: \"w-full rounded-2xl border border-white/15 bg-[#050F2C]/60 px-4 py-3 text-sm text-white focus:border-primary focus:outline-none\",\n                        value: selectedServiceId || \"\",\n                        onChange: (e)=>{\n                            setSelectedServiceId(e.target.value || null);\n                            // Clear pending availability when changing service\n                            setPendingAvailabilityAdditions([]);\n                            setError(null);\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"\",\n                                className: \"bg-[#050F2C] text-white\",\n                                children: \"All Services\"\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 647,\n                                columnNumber: 11\n                            }, this),\n                            allServices.map((service)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                    value: service.id,\n                                    className: \"bg-[#050F2C] text-white\",\n                                    children: [\n                                        service.categoryName,\n                                        \" - \",\n                                        service.name,\n                                        \" (\",\n                                        service.durationMinutes,\n                                        \" min \\xb7 $\",\n                                        (service.priceCents / 100).toFixed(2),\n                                        \")\"\n                                    ]\n                                }, service.id, true, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 651,\n                                    columnNumber: 13\n                                }, this))\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 637,\n                        columnNumber: 9\n                    }, this),\n                    selectedService && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2 text-xs text-white/60\",\n                        children: [\n                            \"Showing availability for: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                className: \"text-white\",\n                                children: selectedService.name\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 659,\n                                columnNumber: 39\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 658,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 635,\n                columnNumber: 7\n            }, this),\n            selectedServiceId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"rounded-3xl border border-white/10 bg-white/5 p-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_4__.Label, {\n                        className: \"text-white/70 mb-3 block\",\n                        children: \"Select Staff Member\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 667,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-wrap items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StaffPill, {\n                                label: \"All Staff\",\n                                active: selectedStaffId === \"any\",\n                                onClick: ()=>{\n                                    setSelectedStaffId(\"any\");\n                                // Don't clear pending - keep all pending slots visible\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 669,\n                                columnNumber: 13\n                            }, this),\n                            staff.filter((member)=>{\n                                if (member.active === false) return false;\n                                // Only show staff assigned to this service\n                                if (selectedService) {\n                                    return selectedService.staffIds.includes(member.id);\n                                }\n                                return true;\n                            }).map((member)=>{\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StaffPill, {\n                                    label: member.name,\n                                    color: member.color,\n                                    active: selectedStaffId === member.id,\n                                    onClick: ()=>{\n                                        // Don't clear pending - keep all pending slots visible when switching staff\n                                        setSelectedStaffId(member.id);\n                                    }\n                                }, member.id, false, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 688,\n                                    columnNumber: 19\n                                }, this);\n                            })\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 668,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_helper_text__WEBPACK_IMPORTED_MODULE_3__.HelperText, {\n                        className: \"mt-3 text-white/50\",\n                        children: selectedStaffId === \"any\" ? \"Select a staff member above, then click empty time slots to add availability\" : \"Adding availability for \".concat((_staff_find = staff.find((s)=>s.id === selectedStaffId)) === null || _staff_find === void 0 ? void 0 : _staff_find.name, '. Click empty time slots to add availability. Click \"Save\" when done.')\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 702,\n                        columnNumber: 11\n                    }, this),\n                    pendingAvailabilityAdditions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 flex items-center justify-between rounded-2xl border border-primary/40 bg-primary/10 px-4 py-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm font-semibold text-white\",\n                                        children: [\n                                            pendingAvailabilityAdditions.length,\n                                            \" availability slot\",\n                                            pendingAvailabilityAdditions.length > 1 ? \"s\" : \"\",\n                                            \" pending\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 710,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-white/60\",\n                                        children: 'Click \"Save\" to apply changes to the booking system'\n                                    }, void 0, false, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 713,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 709,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                        variant: \"ghost\",\n                                        onClick: ()=>setPendingAvailabilityAdditions([]),\n                                        disabled: isSavingAvailability,\n                                        children: \"Clear\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 718,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                        onClick: handleSaveAvailability,\n                                        isLoading: isSavingAvailability,\n                                        disabled: isSavingAvailability,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                className: \"mr-2 h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                lineNumber: 730,\n                                                columnNumber: 19\n                                            }, this),\n                                            \"Save Availability\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 725,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 717,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 708,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 666,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-between rounded-3xl border border-white/10 bg-white/5 px-6 py-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        onClick: ()=>navigateWeek(\"prev\"),\n                        className: \"text-white/70 hover:text-white\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                            className: \"h-5 w-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 746,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 741,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-lg font-semibold text-white\",\n                                children: monthYear\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 749,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-xs text-white/60\",\n                                children: [\n                                    (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(weekDays[0], timezone, {\n                                        month: \"short\",\n                                        day: \"numeric\"\n                                    }),\n                                    \" -\",\n                                    \" \",\n                                    (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(weekDays[6], timezone, {\n                                        month: \"short\",\n                                        day: \"numeric\"\n                                    })\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 750,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 748,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        onClick: ()=>navigateWeek(\"next\"),\n                        className: \"text-white/70 hover:text-white\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                            className: \"h-5 w-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 760,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 755,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 740,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"rounded-3xl border border-white/10 bg-white/5 p-8 shadow-[0_0_60px_rgba(91,100,255,0.15)]\",\n                children: !selectedServiceId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"rounded-3xl border border-white/10 bg-black/60 p-8 text-center text-white/60\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-base\",\n                        children: \"Select a service above to add availability\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 768,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 767,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"overflow-x-auto\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"min-w-full\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-8 gap-2 border-b border-white/10 pb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs font-semibold text-white/60\",\n                                        children: \"Time\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 775,\n                                        columnNumber: 17\n                                    }, this),\n                                    weekDays.map((day, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-center\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs font-semibold text-white/60\",\n                                                    children: (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, {\n                                                        weekday: \"short\"\n                                                    })\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                    lineNumber: 778,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm font-semibold text-white\",\n                                                    children: (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, {\n                                                        day: \"numeric\"\n                                                    })\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                    lineNumber: 781,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, idx, true, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 777,\n                                            columnNumber: 19\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 774,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 space-y-1\",\n                                children: hours.map((hour)=>{\n                                    const hourLabel = hour === 12 ? \"12 PM\" : hour > 12 ? \"\".concat(hour - 12, \" PM\") : \"\".concat(hour, \" AM\");\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid grid-cols-8 gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center text-xs text-white/60 py-2\",\n                                                children: hourLabel\n                                            }, void 0, false, {\n                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                lineNumber: 794,\n                                                columnNumber: 23\n                                            }, this),\n                                            weekDays.map((day, dayIdx)=>{\n                                                var _slotsByDayAndHour_dateKey;\n                                                const dateKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, \"yyyy-MM-dd\");\n                                                const slotsForHour = ((_slotsByDayAndHour_dateKey = slotsByDayAndHour[dateKey]) === null || _slotsByDayAndHour_dateKey === void 0 ? void 0 : _slotsByDayAndHour_dateKey[hour]) || [];\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"py-1\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"space-y-1\",\n                                                        children: [\n                                                            slotsForHour.map((slot)=>{\n                                                                const staffMember = staff.find((s)=>s.id === slot.staffId);\n                                                                const isPending = slot.id && slot.id.startsWith(\"pending-\");\n                                                                const isSelectedStaff = selectedStaffId !== \"any\" && slot.staffId === selectedStaffId;\n                                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    type: \"button\",\n                                                                    onClick: isPending && isSelectedStaff ? ()=>{\n                                                                        // Remove pending slot on click\n                                                                        const slotDateKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(day, timezone, \"yyyy-MM-dd\");\n                                                                        setPendingAvailabilityAdditions((prev)=>prev.filter((pending)=>{\n                                                                                const pendingDateKey = (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(pending.date, timezone, \"yyyy-MM-dd\");\n                                                                                return !(pending.staffId === slot.staffId && pendingDateKey === slotDateKey && pending.hour === hour);\n                                                                            }));\n                                                                    } : undefined,\n                                                                    className: \"w-full rounded-lg border px-2 py-1.5 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/70 \".concat(isPending ? \"border-primary/60 bg-primary/20 hover:border-red-500/60 hover:bg-red-500/20\" : \"border-primary/40 bg-primary/20 hover:border-primary/60 hover:bg-primary/30\"),\n                                                                    style: {\n                                                                        borderColor: (staffMember === null || staffMember === void 0 ? void 0 : staffMember.color) ? \"\".concat(staffMember.color, \"80\") : undefined,\n                                                                        backgroundColor: (staffMember === null || staffMember === void 0 ? void 0 : staffMember.color) ? \"\".concat(staffMember.color, \"20\") : undefined\n                                                                    },\n                                                                    title: isPending && isSelectedStaff ? \"Click to remove\" : undefined,\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                            className: \"text-xs font-semibold text-white\",\n                                                                            children: (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(new Date(slot.startDateTime), timezone, {\n                                                                                hour: \"numeric\",\n                                                                                minute: \"2-digit\"\n                                                                            })\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                            lineNumber: 839,\n                                                                            columnNumber: 37\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                            className: \"text-[10px] text-white/70 mt-0.5 truncate\",\n                                                                            children: slot.staffName\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                            lineNumber: 842,\n                                                                            columnNumber: 37\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                            className: \"text-[10px] mt-0.5 truncate \".concat(isPending ? \"text-primary/90 font-semibold\" : \"text-emerald-400/90 font-semibold\"),\n                                                                            children: isPending ? \" Pending\" : \" Saved\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                            lineNumber: 845,\n                                                                            columnNumber: 37\n                                                                        }, this)\n                                                                    ]\n                                                                }, slot.id, true, {\n                                                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                    lineNumber: 811,\n                                                                    columnNumber: 35\n                                                                }, this);\n                                                            }),\n                                                            slotsForHour.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                type: \"button\",\n                                                                onClick: ()=>handleEmptySlotClick(day, hour),\n                                                                className: \"h-full w-full rounded-lg bg-white/5 border border-white/5 hover:border-primary/40 hover:bg-primary/10 py-1.5 transition cursor-pointer\",\n                                                                title: \"Click to add availability\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"text-[10px] text-white/20 text-center\",\n                                                                    children: \"+ Add\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                    lineNumber: 860,\n                                                                    columnNumber: 35\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                lineNumber: 854,\n                                                                columnNumber: 33\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                        lineNumber: 803,\n                                                        columnNumber: 29\n                                                    }, this)\n                                                }, dayIdx, false, {\n                                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                    lineNumber: 802,\n                                                    columnNumber: 27\n                                                }, this);\n                                            })\n                                        ]\n                                    }, hour, true, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 793,\n                                        columnNumber: 21\n                                    }, this);\n                                })\n                            }, void 0, false, {\n                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                lineNumber: 789,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 772,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 771,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 765,\n                columnNumber: 7\n            }, this),\n            error ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_helper_text__WEBPACK_IMPORTED_MODULE_3__.HelperText, {\n                intent: \"error\",\n                role: \"alert\",\n                children: error\n            }, void 0, false, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 877,\n                columnNumber: 9\n            }, this) : null,\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-8 flex items-center justify-end gap-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_onboarding_test_data_button__WEBPACK_IMPORTED_MODULE_6__.TestDataButton, {\n                    onClick: handleFillTestData\n                }, void 0, false, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 883,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 882,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_onboarding_step_actions__WEBPACK_IMPORTED_MODULE_5__.StepActions, {\n                onBack: onBack,\n                onNext: handleContinue\n            }, void 0, false, {\n                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                lineNumber: 887,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n        lineNumber: 620,\n        columnNumber: 5\n    }, this);\n}\n_s(AvailabilityStep, \"DKHOWPDmbaS3BrHC5AI19g8x/jA=\");\n_c = AvailabilityStep;\nfunction AddAvailabilityModal(param) {\n    let { date, hour, service, staff, onSelectStaff, onCancel, isSaving, timezone } = param;\n    if (!service) return null;\n    // Calculate end time\n    const startMinutes = hour * 60;\n    const endMinutes = startMinutes + service.durationMinutes;\n    const endHour = Math.floor(endMinutes / 60);\n    const endMin = endMinutes % 60;\n    const startTimeStr = \"\".concat(String(hour).padStart(2, \"0\"), \":00\");\n    const endTimeStr = \"\".concat(String(endHour).padStart(2, \"0\"), \":\").concat(String(endMin).padStart(2, \"0\"));\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-50 flex items-center justify-center bg-black/80 px-4 py-8\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"relative max-h-[90vh] w-full max-w-2xl overflow-y-auto rounded-3xl border border-white/10 bg-black/90 p-8 shadow-[0_60px_160px_rgba(4,12,35,0.7)]\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    className: \"absolute right-6 top-6 rounded-full border border-white/20 bg-white/5 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-white/70 transition hover:text-white\",\n                    onClick: onCancel,\n                    disabled: isSaving,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarCheck2_ChevronLeft_ChevronRight_Save_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                        className: \"h-4 w-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 930,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 924,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                    className: \"space-y-2 pr-16\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"font-display text-3xl text-white\",\n                            children: \"Add Availability\"\n                        }, void 0, false, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 934,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-white/60\",\n                            children: \"Select a staff member to add availability for this time slot.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 935,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 933,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-8 space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"rounded-2xl border border-white/10 bg-black/70 p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-sm font-semibold uppercase tracking-wide text-white/50 mb-4\",\n                                    children: \"Service\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 943,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-white font-semibold\",\n                                            children: service.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 947,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-sm text-white/70\",\n                                            children: [\n                                                service.durationMinutes,\n                                                \" minutes\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 948,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 946,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 942,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"rounded-2xl border border-white/10 bg-black/70 p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-sm font-semibold uppercase tracking-wide text-white/50 mb-4\",\n                                    children: \"Time Slot\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 954,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-white\",\n                                            children: (0,_lib_timezone__WEBPACK_IMPORTED_MODULE_8__.formatInTimeZone)(date, timezone, {\n                                                weekday: \"long\",\n                                                month: \"short\",\n                                                day: \"numeric\"\n                                            })\n                                        }, void 0, false, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 958,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-white\",\n                                            children: [\n                                                startTimeStr,\n                                                \" - \",\n                                                endTimeStr\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 965,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 957,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 953,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_4__.Label, {\n                                    className: \"text-white/70 mb-2 block\",\n                                    children: \"Select Staff Member\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 973,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-2\",\n                                    children: staff.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-white/60\",\n                                        children: \"No staff members available\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                        lineNumber: 976,\n                                        columnNumber: 17\n                                    }, this) : staff.map((member)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>onSelectStaff(member.id),\n                                            disabled: isSaving,\n                                            className: \"w-full rounded-2xl border border-white/15 bg-[#050F2C]/60 px-4 py-3 text-left transition hover:border-primary hover:bg-primary/10 focus:border-primary focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed\",\n                                            style: {\n                                                borderColor: member.color ? \"\".concat(member.color, \"80\") : undefined\n                                            },\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    member.color && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"h-4 w-4 rounded-full\",\n                                                        style: {\n                                                            backgroundColor: member.color\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                        lineNumber: 991,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                className: \"text-sm font-semibold text-white\",\n                                                                children: member.name\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                lineNumber: 997,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            member.role && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                className: \"text-xs text-white/60\",\n                                                                children: member.role\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                                lineNumber: 999,\n                                                                columnNumber: 27\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                        lineNumber: 996,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                                lineNumber: 989,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, member.id, false, {\n                                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                            lineNumber: 979,\n                                            columnNumber: 19\n                                        }, this))\n                                }, void 0, false, {\n                                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                                    lineNumber: 974,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                            lineNumber: 972,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 940,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-8 flex items-center justify-end gap-3\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        onClick: onCancel,\n                        disabled: isSaving,\n                        children: \"Cancel\"\n                    }, void 0, false, {\n                        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                        lineNumber: 1012,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n                    lineNumber: 1011,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n            lineNumber: 923,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n        lineNumber: 922,\n        columnNumber: 5\n    }, this);\n}\n_c1 = AddAvailabilityModal;\nfunction StaffPill(param) {\n    let { label, color, active, onClick } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        type: \"button\",\n        onClick: onClick,\n        className: \"rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/70 focus-visible:ring-offset-2 focus-visible:ring-offset-black \".concat(active ? \"border-white/60 bg-white/15 text-white\" : \"border-white/10 bg-white/5 text-white/60 hover:text-white/80\"),\n        style: active && color ? {\n            borderColor: color,\n            boxShadow: \"0 0 25px \".concat(color, \"33\")\n        } : undefined,\n        children: label\n    }, void 0, false, {\n        fileName: \"/Users/3017387smacbookm/Downloads/Career/Tithi/apps/web/src/components/onboarding/availability-step.tsx\",\n        lineNumber: 1033,\n        columnNumber: 5\n    }, this);\n}\n_c2 = StaffPill;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"AvailabilityStep\");\n$RefreshReg$(_c1, \"AddAvailabilityModal\");\n$RefreshReg$(_c2, \"StaffPill\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL29uYm9hcmRpbmcvYXZhaWxhYmlsaXR5LXN0ZXAudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXFEO0FBQzZCO0FBRWxDO0FBQ1M7QUFDWDtBQUNxQjtBQUNPO0FBQ0w7QUFDc0I7QUFDbUI7QUFDbkQ7QUFrQnBELFNBQVNtQixpQkFBaUIsS0FPVDtRQVBTLEVBQy9CQyxRQUFRLEVBQ1JDLEtBQUssRUFDTEMsYUFBYSxFQUNiQyxNQUFNLEVBQ05DLE1BQU0sRUFDTkMsV0FBVyxtQkFBbUIsbUJBQW1CO0lBQXBCLEVBQ1AsR0FQUztRQWlxQlVKOztJQXpwQnpDLE1BQU0sQ0FBQ0ssa0JBQWtCQyxvQkFBb0IsR0FBRzFCLCtDQUFRQSxDQUFDO1FBQ3ZELE1BQU0yQixRQUFRLElBQUlDO1FBQ2xCLE1BQU1DLFlBQVlGLE1BQU1HLE1BQU07UUFDOUIsTUFBTUMsT0FBT0osTUFBTUssT0FBTyxLQUFLSDtRQUMvQixNQUFNSSxTQUFTLElBQUlMLEtBQUtELE1BQU1PLE9BQU8sQ0FBQ0g7UUFDdENFLE9BQU9FLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRztRQUN6QixPQUFPRjtJQUNUO0lBQ0EsTUFBTSxDQUFDRyxtQkFBbUJDLHFCQUFxQixHQUFHckMsK0NBQVFBLENBQWdCO0lBQzFFLE1BQU0sQ0FBQ3NDLGlCQUFpQkMsbUJBQW1CLEdBQUd2QywrQ0FBUUEsQ0FBUyxRQUFRLDZCQUE2QjtJQUNwRyxNQUFNLENBQUN3QyxjQUFjQyxnQkFBZ0IsR0FBR3pDLCtDQUFRQSxDQUE2QixFQUFFO0lBQy9FLE1BQU0sQ0FBQzBDLHNCQUFzQkMsd0JBQXdCLEdBQUczQywrQ0FBUUEsQ0FBQztJQUNqRSwwREFBMEQ7SUFDMUQsTUFBTSxDQUFDNEMsbUJBQW1CQyxxQkFBcUIsR0FBRzdDLCtDQUFRQSxDQUF3QixFQUFFO0lBQ3BGLG1FQUFtRTtJQUNuRSxNQUFNLENBQUM4Qyw4QkFBOEJD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Ozs7OztBQUdQO01BekJTRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9vbmJvYXJkaW5nL2F2YWlsYWJpbGl0eS1zdGVwLnRzeD9jZDhkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDaGV2cm9uTGVmdCwgQ2hldnJvblJpZ2h0LCBTYXZlLCBDYWxlbmRhckNoZWNrMiwgWCB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcblxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IEhlbHBlclRleHQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2hlbHBlci10ZXh0XCI7XG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvbGFiZWxcIjtcbmltcG9ydCB7IFN0ZXBBY3Rpb25zIH0gZnJvbSBcIkAvY29tcG9uZW50cy9vbmJvYXJkaW5nL3N0ZXAtYWN0aW9uc1wiO1xuaW1wb3J0IHsgVGVzdERhdGFCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL29uYm9hcmRpbmcvdGVzdC1kYXRhLWJ1dHRvblwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVBdmFpbGFiaWxpdHlEYXRhIH0gZnJvbSBcIkAvbGliL3Rlc3QtZGF0YS1nZW5lcmF0b3JcIjtcbmltcG9ydCB7IGZvcm1hdEluVGltZVpvbmUsIHpvbmVkTWludXRlc1RvRGF0ZSwgdGltZVN0cmluZ1RvTWludXRlcyB9IGZyb20gXCJAL2xpYi90aW1lem9uZVwiO1xuaW1wb3J0IHsgYnVpbGRFeHBhbmRlZFNsb3RzLCBncm91cFNsb3RzQnlEYXksIHR5cGUgRXhwYW5kZWRBdmFpbGFiaWxpdHlTbG90IH0gZnJvbSBcIkAvbGliL2F2YWlsYWJpbGl0eS11dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50Q2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlLWNsaWVudFwiO1xuaW1wb3J0IHR5cGUge1xuICBBdmFpbGFiaWxpdHlTbG90LFxuICBTZXJ2aWNlQXZhaWxhYmlsaXR5LFxuICBTZXJ2aWNlQ2F0ZWdvcnksXG4gIFNlcnZpY2VEZWZpbml0aW9uLFxuICBTdGFmZk1lbWJlclxufSBmcm9tIFwiQC9saWIvb25ib2FyZGluZy1jb250ZXh0XCI7XG5cbmludGVyZmFjZSBBdmFpbGFiaWxpdHlTdGVwUHJvcHMge1xuICBzZXJ2aWNlczogU2VydmljZUNhdGVnb3J5W107XG4gIHN0YWZmOiBTdGFmZk1lbWJlcltdO1xuICBkZWZhdWx0VmFsdWVzOiBTZXJ2aWNlQXZhaWxhYmlsaXR5W107XG4gIG9uTmV4dDogKHZhbHVlczogU2VydmljZUF2YWlsYWJpbGl0eVtdKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZDtcbiAgb25CYWNrOiAoKSA9PiB2b2lkO1xuICB0aW1lem9uZT86IHN0cmluZzsgLy8gT3B0aW9uYWwgdGltZXpvbmUgcHJvcFxufVxuXG5leHBvcnQgZnVuY3Rpb24gQXZhaWxhYmlsaXR5U3RlcCh7XG4gIHNlcnZpY2VzLFxuICBzdGFmZixcbiAgZGVmYXVsdFZhbHVlcyxcbiAgb25OZXh0LFxuICBvbkJhY2ssXG4gIHRpbWV6b25lID0gXCJBbWVyaWNhL05ld19Zb3JrXCIgLy8gRGVmYXVsdCB0aW1lem9uZVxufTogQXZhaWxhYmlsaXR5U3RlcFByb3BzKSB7XG4gIGNvbnN0IFtjdXJyZW50V2Vla1N0YXJ0LCBzZXRDdXJyZW50V2Vla1N0YXJ0XSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gdG9kYXkuZ2V0RGF5KCk7XG4gICAgY29uc3QgZGlmZiA9IHRvZGF5LmdldERhdGUoKSAtIGRheU9mV2VlaztcbiAgICBjb25zdCBzdW5kYXkgPSBuZXcgRGF0ZSh0b2RheS5zZXREYXRlKGRpZmYpKTtcbiAgICBzdW5kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgcmV0dXJuIHN1bmRheTtcbiAgfSk7XG4gIGNvbnN0IFtzZWxlY3RlZFNlcnZpY2VJZCwgc2V0U2VsZWN0ZWRTZXJ2aWNlSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZWxlY3RlZFN0YWZmSWQsIHNldFNlbGVjdGVkU3RhZmZJZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiYW55XCIpOyAvLyBcImFueVwiIG1lYW5zIHNob3cgYWxsIHN0YWZmXG4gIGNvbnN0IFtmZXRjaGVkU2xvdHMsIHNldEZldGNoZWRTbG90c10gPSB1c2VTdGF0ZTxFeHBhbmRlZEF2YWlsYWJpbGl0eVNsb3RbXT4oW10pO1xuICBjb25zdCBbaXNTYXZpbmdBdmFpbGFiaWxpdHksIHNldElzU2F2aW5nQXZhaWxhYmlsaXR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy8gVHJhY2sgc2F2ZWQgYXZhaWxhYmlsaXR5IGR1cmluZyB0aGlzIG9uYm9hcmRpbmcgc2Vzc2lvblxuICBjb25zdCBbc2F2ZWRBdmFpbGFiaWxpdHksIHNldFNhdmVkQXZhaWxhYmlsaXR5XSA9IHVzZVN0YXRlPFNlcnZpY2VBdmFpbGFiaWxpdHlbXT4oW10pO1xuICAvLyBQZW5kaW5nIGF2YWlsYWJpbGl0eSBhZGRpdGlvbnMgLSBzbG90cyBjbGlja2VkIGJ1dCBub3QgeWV0IHNhdmVkXG4gIGNvbnN0IFtwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zLCBzZXRQZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zXSA9IHVzZVN0YXRlPEFycmF5PHtcbiAgICBzdGFmZklkOiBzdHJpbmc7XG4gICAgZGF0ZTogRGF0ZTtcbiAgICBob3VyOiBudW1iZXI7XG4gIH0+PihbXSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gR2V0IGFsbCBzZXJ2aWNlcyBmb3IgZHJvcGRvd25cbiAgY29uc3QgYWxsU2VydmljZXMgPSBzZXJ2aWNlcy5mbGF0TWFwKChjYXRlZ29yeSkgPT5cbiAgICBjYXRlZ29yeS5zZXJ2aWNlcy5tYXAoKHNlcnZpY2UpID0+ICh7XG4gICAgICAuLi5zZXJ2aWNlLFxuICAgICAgY2F0ZWdvcnlOYW1lOiBjYXRlZ29yeS5uYW1lXG4gICAgfSkpXG4gICk7XG5cbiAgLy8gV2hlbiBzZXJ2aWNlIGNoYW5nZXMsIGxvYWQgc2F2ZWQgYXZhaWxhYmlsaXR5IGZvciB0aGF0IHNlcnZpY2VcbiAgLy8gVGhpcyBlbnN1cmVzIHNhdmVkIHNsb3RzIHBlcnNpc3Qgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBzZXJ2aWNlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRTZXJ2aWNlSWQpIHtcbiAgICAgIHNldEZldGNoZWRTbG90cyhbXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNlbGVjdGVkU2VydmljZSA9IGFsbFNlcnZpY2VzLmZpbmQocyA9PiBzLmlkID09PSBzZWxlY3RlZFNlcnZpY2VJZCk7XG4gICAgaWYgKCFzZWxlY3RlZFNlcnZpY2UpIHtcbiAgICAgIHNldEZldGNoZWRTbG90cyhbXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgc2F2ZWQgYXZhaWxhYmlsaXR5IGZvciB0aGlzIHNlcnZpY2UgaW4gc3RhdGVcbiAgICBjb25zdCBzZXJ2aWNlQXZhaWwgPSBzYXZlZEF2YWlsYWJpbGl0eS5maW5kKFxuICAgICAgKGF2YWlsOiBTZXJ2aWNlQXZhaWxhYmlsaXR5KSA9PiBhdmFpbC5zZXJ2aWNlSWQgPT09IHNlbGVjdGVkU2VydmljZUlkXG4gICAgKTtcbiAgICBcbiAgICBpZiAoc2VydmljZUF2YWlsKSB7XG4gICAgICAvLyBFeHBhbmQgc2F2ZWQgc2xvdHMgZm9yIHRoaXMgc2VydmljZVxuICAgICAgY29uc3Qgd2Vla1N0YXJ0ID0gbmV3IERhdGUoY3VycmVudFdlZWtTdGFydCk7XG4gICAgICB3ZWVrU3RhcnQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGV4cGFuZGVkU2xvdHMgPSBidWlsZEV4cGFuZGVkU2xvdHMoe1xuICAgICAgICBzZXJ2aWNlOiBzZWxlY3RlZFNlcnZpY2UsXG4gICAgICAgIHNlcnZpY2VBdmFpbGFiaWxpdHk6IHNlcnZpY2VBdmFpbCxcbiAgICAgICAgc3RhZmY6IHN0YWZmLFxuICAgICAgICB0aW1lem9uZTogdGltZXpvbmUsXG4gICAgICAgIHN0YXJ0RGF0ZTogd2Vla1N0YXJ0LFxuICAgICAgICBob3Jpem9uRGF5czogMTQsXG4gICAgICAgIGluY2x1ZGVQYXN0U2xvdHM6IHRydWVcbiAgICAgIH0pO1xuICAgICAgc2V0RmV0Y2hlZFNsb3RzKGV4cGFuZGVkU2xvdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBzYXZlZCBhdmFpbGFiaWxpdHkgZm9yIHRoaXMgc2VydmljZSB5ZXQgLSBzdGFydCB3aXRoIGVtcHR5IGNhbGVuZGFyXG4gICAgICBzZXRGZXRjaGVkU2xvdHMoW10pO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkU2VydmljZUlkLCBzYXZlZEF2YWlsYWJpbGl0eSwgYWxsU2VydmljZXMsIHN0YWZmLCB0aW1lem9uZSwgY3VycmVudFdlZWtTdGFydF0pO1xuXG4gIC8vIEdyb3VwIHNsb3RzIGJ5IGRheSAtIGR1cmluZyBvbmJvYXJkaW5nLCB3ZSBvbmx5IHNob3cgcGVuZGluZyBzbG90cyBhbmQgc2F2ZWQgc2xvdHMgZnJvbSB0aGlzIHNlc3Npb25cbiAgY29uc3QgZ3JvdXBlZFNsb3RzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZFNlcnZpY2VJZCkgcmV0dXJuIHt9O1xuICAgIC8vIENvbWJpbmUgZmV0Y2hlZCBzbG90cyAoc2F2ZWQgZHVyaW5nIHRoaXMgc2Vzc2lvbikgd2l0aCBhbnkgYWRkaXRpb25hbCBzbG90c1xuICAgIHJldHVybiBncm91cFNsb3RzQnlEYXkoZmV0Y2hlZFNsb3RzLCB0aW1lem9uZSk7XG4gIH0sIFtmZXRjaGVkU2xvdHMsIHRpbWV6b25lLCBzZWxlY3RlZFNlcnZpY2VJZF0pO1xuXG4gIC8vIEdlbmVyYXRlIGRheXMgb2YgdGhlIHdlZWtcbiAgY29uc3Qgd2Vla0RheXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBkYXlzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50V2Vla1N0YXJ0KTtcbiAgICAgIGRhdGUuc2V0RGF0ZShjdXJyZW50V2Vla1N0YXJ0LmdldERhdGUoKSArIGkpO1xuICAgICAgZGF5cy5wdXNoKGRhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gZGF5cztcbiAgfSwgW2N1cnJlbnRXZWVrU3RhcnRdKTtcblxuICAvLyBHZW5lcmF0ZSBob3VycyBmcm9tIDggQU0gdG8gOCBQTSAobWF0Y2hpbmcgYm9va2luZyBmbG93KVxuICBjb25zdCBob3VycyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEzIH0sIChfLCBpKSA9PiBpICsgOCk7XG5cbiAgLy8gR3JvdXAgYXZhaWxhYmlsaXR5IHNsb3RzIGJ5IGRheSBhbmQgaG91ciAoaW5jbHVkaW5nIHBlbmRpbmcgYWRkaXRpb25zKVxuICBjb25zdCBzbG90c0J5RGF5QW5kSG91ciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGdyb3VwZWQ6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxudW1iZXIsIEV4cGFuZGVkQXZhaWxhYmlsaXR5U2xvdFtdPj4gPSB7fTtcbiAgICBcbiAgICAvLyBGbGF0dGVuIGFsbCBzbG90cyBmcm9tIGFsbCBkYXlzXG4gICAgY29uc3QgYWxsU2xvdHMgPSBPYmplY3QudmFsdWVzKGdyb3VwZWRTbG90cykuZmxhdCgpO1xuICAgIFxuICAgIC8vIEFkZCBmZXRjaGVkIHNsb3RzXG4gICAgYWxsU2xvdHMuZm9yRWFjaChzbG90ID0+IHtcbiAgICAgIGNvbnN0IHNsb3REYXRlID0gbmV3IERhdGUoc2xvdC5zdGFydERhdGVUaW1lKTtcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBmb3JtYXRJblRpbWVab25lKHNsb3REYXRlLCB0aW1lem9uZSwgXCJ5eXl5LU1NLWRkXCIpO1xuICAgICAgY29uc3QgaG91ciA9IGZvcm1hdEluVGltZVpvbmUoc2xvdERhdGUsIHRpbWV6b25lLCB7IGhvdXI6IFwibnVtZXJpY1wiLCBob3VyMTI6IGZhbHNlIH0pO1xuICAgICAgY29uc3QgaG91ck51bSA9IHBhcnNlSW50KGhvdXIsIDEwKTtcbiAgICAgIFxuICAgICAgLy8gT25seSBpbmNsdWRlIHNsb3RzIHRoYXQgYXJlIGluIHRoZSBjdXJyZW50IHdlZWtcbiAgICAgIGNvbnN0IGlzSW5DdXJyZW50V2VlayA9IHdlZWtEYXlzLnNvbWUoZGF5ID0+IHtcbiAgICAgICAgY29uc3QgZGF5S2V5ID0gZm9ybWF0SW5UaW1lWm9uZShkYXksIHRpbWV6b25lLCBcInl5eXktTU0tZGRcIik7XG4gICAgICAgIHJldHVybiBkYXlLZXkgPT09IGRhdGVLZXk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFpc0luQ3VycmVudFdlZWspIHJldHVybjtcbiAgICAgIFxuICAgICAgaWYgKCFncm91cGVkW2RhdGVLZXldKSB7XG4gICAgICAgIGdyb3VwZWRbZGF0ZUtleV0gPSB7fTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFncm91cGVkW2RhdGVLZXldW2hvdXJOdW1dKSB7XG4gICAgICAgIGdyb3VwZWRbZGF0ZUtleV1baG91ck51bV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZXMgKHNhbWUgaG91ciwgc2FtZSBzdGFmZiwgc2FtZSBkYXRlKVxuICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBncm91cGVkW2RhdGVLZXldW2hvdXJOdW1dLnNvbWUoXG4gICAgICAgIGV4aXN0aW5nID0+IGV4aXN0aW5nLnN0YWZmSWQgPT09IHNsb3Quc3RhZmZJZCAmJiBleGlzdGluZy5zdGFydERhdGVUaW1lID09PSBzbG90LnN0YXJ0RGF0ZVRpbWVcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICghaXNEdXBsaWNhdGUpIHtcbiAgICAgICAgZ3JvdXBlZFtkYXRlS2V5XVtob3VyTnVtXS5wdXNoKHNsb3QpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCBwZW5kaW5nIGF2YWlsYWJpbGl0eSBhZGRpdGlvbnMgYXMgdmlzdWFsIHNsb3RzXG4gICAgaWYgKHNlbGVjdGVkU2VydmljZUlkKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZFNlcnZpY2UgPSBhbGxTZXJ2aWNlcy5maW5kKHMgPT4gcy5pZCA9PT0gc2VsZWN0ZWRTZXJ2aWNlSWQpO1xuICAgICAgaWYgKHNlbGVjdGVkU2VydmljZSkge1xuICAgICAgICBwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zLmZvckVhY2goKHBlbmRpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gZm9ybWF0SW5UaW1lWm9uZShwZW5kaW5nLmRhdGUsIHRpbWV6b25lLCBcInl5eXktTU0tZGRcIik7XG4gICAgICAgICAgY29uc3QgaG91ck51bSA9IHBlbmRpbmcuaG91cjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPbmx5IGluY2x1ZGUgaWYgaW4gY3VycmVudCB3ZWVrXG4gICAgICAgICAgY29uc3QgaXNJbkN1cnJlbnRXZWVrID0gd2Vla0RheXMuc29tZShkYXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF5S2V5ID0gZm9ybWF0SW5UaW1lWm9uZShkYXksIHRpbWV6b25lLCBcInl5eXktTU0tZGRcIik7XG4gICAgICAgICAgICByZXR1cm4gZGF5S2V5ID09PSBkYXRlS2V5O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghaXNJbkN1cnJlbnRXZWVrKSByZXR1cm47XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFncm91cGVkW2RhdGVLZXldKSB7XG4gICAgICAgICAgICBncm91cGVkW2RhdGVLZXldID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmICghZ3JvdXBlZFtkYXRlS2V5XVtob3VyTnVtXSkge1xuICAgICAgICAgICAgZ3JvdXBlZFtkYXRlS2V5XVtob3VyTnVtXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHBlbmRpbmcgc2xvdCBhbHJlYWR5IGV4aXN0cyBhcyBwZW5kaW5nIChkb24ndCBkdXBsaWNhdGUpXG4gICAgICAgICAgY29uc3QgYWxyZWFkeVBlbmRpbmcgPSBncm91cGVkW2RhdGVLZXldW2hvdXJOdW1dLnNvbWUoXG4gICAgICAgICAgICBleGlzdGluZyA9PiBleGlzdGluZy5zdGFmZklkID09PSBwZW5kaW5nLnN0YWZmSWQgJiYgXG4gICAgICAgICAgICBleGlzdGluZy5pZCAmJiBleGlzdGluZy5pZC5zdGFydHNXaXRoKCdwZW5kaW5nLScpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWFscmVhZHlQZW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55IHNhdmVkIHNsb3QgZm9yIHRoZSBzYW1lIHRpbWUvc3RhZmYgKHBlbmRpbmcgcmVwbGFjZXMgc2F2ZWQpXG4gICAgICAgICAgICBncm91cGVkW2RhdGVLZXldW2hvdXJOdW1dID0gZ3JvdXBlZFtkYXRlS2V5XVtob3VyTnVtXS5maWx0ZXIoXG4gICAgICAgICAgICAgIGV4aXN0aW5nID0+ICEoZXhpc3Rpbmcuc3RhZmZJZCA9PT0gcGVuZGluZy5zdGFmZklkICYmICFleGlzdGluZy5pZD8uc3RhcnRzV2l0aCgncGVuZGluZy0nKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHN0YWZmTWVtYmVyID0gc3RhZmYuZmluZCgoczogU3RhZmZNZW1iZXIpID0+IHMuaWQgPT09IHBlbmRpbmcuc3RhZmZJZCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGVUaW1lID0gem9uZWRNaW51dGVzVG9EYXRlKHBlbmRpbmcuZGF0ZSwgcGVuZGluZy5ob3VyICogNjAsIHRpbWV6b25lKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGVUaW1lID0gbmV3IERhdGUoc3RhcnREYXRlVGltZS5nZXRUaW1lKCkgKyBzZWxlY3RlZFNlcnZpY2UuZHVyYXRpb25NaW51dGVzICogNjAgKiAxMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZ3JvdXBlZFtkYXRlS2V5XVtob3VyTnVtXS5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGBwZW5kaW5nLSR7cGVuZGluZy5zdGFmZklkfS0ke2RhdGVLZXl9LSR7aG91ck51bX1gLFxuICAgICAgICAgICAgICBzZXJ2aWNlSWQ6IHNlbGVjdGVkU2VydmljZUlkLFxuICAgICAgICAgICAgICBzdGFmZklkOiBwZW5kaW5nLnN0YWZmSWQsXG4gICAgICAgICAgICAgIHN0YWZmTmFtZTogc3RhZmZNZW1iZXI/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgICAgICBzdGFmZkNvbG9yOiBzdGFmZk1lbWJlcj8uY29sb3IgfHwgXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZVRpbWU6IHN0YXJ0RGF0ZVRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZVRpbWU6IGVuZERhdGVUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIGRheUxhYmVsOiBmb3JtYXRJblRpbWVab25lKHBlbmRpbmcuZGF0ZSwgdGltZXpvbmUsIHsgd2Vla2RheTogXCJsb25nXCIgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ3JvdXBlZDtcbiAgfSwgW2dyb3VwZWRTbG90cywgd2Vla0RheXMsIHRpbWV6b25lLCBwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zLCBzZWxlY3RlZFNlcnZpY2VJZCwgYWxsU2VydmljZXMsIHN0YWZmXSk7XG5cbiAgY29uc3QgbmF2aWdhdGVXZWVrID0gKGRpcmVjdGlvbjogXCJwcmV2XCIgfCBcIm5leHRcIikgPT4ge1xuICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50V2Vla1N0YXJ0KTtcbiAgICBuZXdEYXRlLnNldERhdGUobmV3RGF0ZS5nZXREYXRlKCkgKyAoZGlyZWN0aW9uID09PSBcIm5leHRcIiA/IDcgOiAtNykpO1xuICAgIHNldEN1cnJlbnRXZWVrU3RhcnQobmV3RGF0ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRW1wdHlTbG90Q2xpY2sgPSAoZGF5OiBEYXRlLCBob3VyOiBudW1iZXIpID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkU2VydmljZUlkKSB7XG4gICAgICBzZXRFcnJvcignUGxlYXNlIHNlbGVjdCBhIHNlcnZpY2UgZmlyc3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2VsZWN0ZWRTZXJ2aWNlID0gYWxsU2VydmljZXMuZmluZChzID0+IHMuaWQgPT09IHNlbGVjdGVkU2VydmljZUlkKTtcbiAgICBpZiAoIXNlbGVjdGVkU2VydmljZSkge1xuICAgICAgc2V0RXJyb3IoJ1NlcnZpY2Ugbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBzdGFmZiBtZW1iZXJzIGFzc2lnbmVkIHRvIHRoaXMgc2VydmljZVxuICAgIGNvbnN0IHNlcnZpY2VTdGFmZiA9IHN0YWZmLmZpbHRlcihtZW1iZXIgPT4ge1xuICAgICAgaWYgKG1lbWJlci5hY3RpdmUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc2VsZWN0ZWRTZXJ2aWNlLnN0YWZmSWRzLmluY2x1ZGVzKG1lbWJlci5pZCk7XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHNlcnZpY2VTdGFmZi5sZW5ndGggPT09IDApIHtcbiAgICAgIHNldEVycm9yKCdObyBzdGFmZiBtZW1iZXJzIGFzc2lnbmVkIHRvIHRoaXMgc2VydmljZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc3RhZmYgbWVtYmVycyB0byBhZGQvcmVtb3ZlIGF2YWlsYWJpbGl0eSBmb3JcbiAgICBjb25zdCBzdGFmZlRvUHJvY2VzcyA9IHNlbGVjdGVkU3RhZmZJZCAhPT0gXCJhbnlcIiBcbiAgICAgID8gW3NlcnZpY2VTdGFmZi5maW5kKG0gPT4gbS5pZCA9PT0gc2VsZWN0ZWRTdGFmZklkKV0uZmlsdGVyKEJvb2xlYW4pXG4gICAgICA6IHNlcnZpY2VTdGFmZjtcbiAgICBcbiAgICBpZiAoc3RhZmZUb1Byb2Nlc3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIEFMTCBzZWxlY3RlZCBzdGFmZiBhbHJlYWR5IGhhdmUgdGhpcyBzbG90IHBlbmRpbmdcbiAgICBjb25zdCBhbGxQZW5kaW5nID0gc3RhZmZUb1Byb2Nlc3MuZXZlcnkobWVtYmVyID0+IFxuICAgICAgcGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5zb21lKFxuICAgICAgICAocGVuZGluZykgPT5cbiAgICAgICAgICBwZW5kaW5nLnN0YWZmSWQgPT09IG1lbWJlci5pZCAmJlxuICAgICAgICAgIHBlbmRpbmcuZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gZGF5LnRvRGF0ZVN0cmluZygpICYmXG4gICAgICAgICAgcGVuZGluZy5ob3VyID09PSBob3VyXG4gICAgICApXG4gICAgKTtcbiAgICBcbiAgICBpZiAoYWxsUGVuZGluZykge1xuICAgICAgLy8gUmVtb3ZlIGZvciBhbGwgc2VsZWN0ZWQgc3RhZmYgKHRvZ2dsZSBvZmYpXG4gICAgICBzZXRQZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zKChwcmV2KSA9PlxuICAgICAgICBwcmV2LmZpbHRlcihcbiAgICAgICAgICAocGVuZGluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZFN0YWZmID0gc3RhZmZUb1Byb2Nlc3Muc29tZShtID0+IG0uaWQgPT09IHBlbmRpbmcuc3RhZmZJZCk7XG4gICAgICAgICAgICByZXR1cm4gIShpc1NlbGVjdGVkU3RhZmYgJiZcbiAgICAgICAgICAgICAgcGVuZGluZy5kYXRlLnRvRGF0ZVN0cmluZygpID09PSBkYXkudG9EYXRlU3RyaW5nKCkgJiZcbiAgICAgICAgICAgICAgcGVuZGluZy5ob3VyID09PSBob3VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFkZCBmb3IgYWxsIHNlbGVjdGVkIHN0YWZmIChvciBqdXN0IHRoZSBvbmUgc2VsZWN0ZWQpXG4gICAgICBjb25zdCBuZXdBZGRpdGlvbnMgPSBzdGFmZlRvUHJvY2Vzc1xuICAgICAgICAuZmlsdGVyKG1lbWJlciA9PiB7XG4gICAgICAgICAgLy8gT25seSBhZGQgaWYgbm90IGFscmVhZHkgcGVuZGluZ1xuICAgICAgICAgIHJldHVybiAhcGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5zb21lKFxuICAgICAgICAgICAgKHBlbmRpbmcpID0+XG4gICAgICAgICAgICAgIHBlbmRpbmcuc3RhZmZJZCA9PT0gbWVtYmVyLmlkICYmXG4gICAgICAgICAgICAgIHBlbmRpbmcuZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gZGF5LnRvRGF0ZVN0cmluZygpICYmXG4gICAgICAgICAgICAgIHBlbmRpbmcuaG91ciA9PT0gaG91clxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAobWVtYmVyID0+ICh7XG4gICAgICAgICAgc3RhZmZJZDogbWVtYmVyLmlkLFxuICAgICAgICAgIGRhdGU6IGRheSxcbiAgICAgICAgICBob3VyXG4gICAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgaWYgKG5ld0FkZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldFBlbmRpbmdBdmFpbGFiaWxpdHlBZGRpdGlvbnMoKHByZXYpID0+IFsuLi5wcmV2LCAuLi5uZXdBZGRpdGlvbnNdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgc2V0RXJyb3IobnVsbCk7XG4gIH07XG5cblxuICBjb25zdCBoYW5kbGVTYXZlQXZhaWxhYmlsaXR5ID0gYXN5bmMgKCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIGlmICghc2VsZWN0ZWRTZXJ2aWNlSWQgfHwgcGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuXG4gICAgc2V0SXNTYXZpbmdBdmFpbGFiaWxpdHkodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBhdXRoIHRva2VuIGZyb20gU3VwYWJhc2UgY2xpZW50XG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudENsaWVudCgpO1xuICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG4gICAgICBjb25zdCBhdXRoVG9rZW4gPSBzZXNzaW9uPy5hY2Nlc3NfdG9rZW47XG5cbiAgICAgIGNvbnN0IHNlbGVjdGVkU2VydmljZSA9IGFsbFNlcnZpY2VzLmZpbmQocyA9PiBzLmlkID09PSBzZWxlY3RlZFNlcnZpY2VJZCk7XG4gICAgICBpZiAoIXNlbGVjdGVkU2VydmljZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdGVkIHNlcnZpY2Ugbm90IGZvdW5kJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVzZSBzYXZlZEF2YWlsYWJpbGl0eSBzdGF0ZSAod2hpY2ggaGFzIHRlbXBvcmFyeSBJRHMpIGFzIHRoZSBiYXNlXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVuY3kgLSB3ZSBkb24ndCBtaXggcmVhbCBVVUlEcyBmcm9tIEFQSSB3aXRoIHRlbXBvcmFyeSBJRHNcbiAgICAgIC8vIFRoZSBBUEkgaGFuZGxlcyBJRCBtYXBwaW5nIHdoZW4gc2F2aW5nLCBidXQgb3VyIHN0YXRlIGtlZXBzIHRlbXBvcmFyeSBJRHNcbiAgICAgIGxldCBhbGxBdmFpbGFiaWxpdHk6IFNlcnZpY2VBdmFpbGFiaWxpdHlbXSA9IFsuLi5zYXZlZEF2YWlsYWJpbGl0eV07XG5cbiAgICAgIC8vIEZpbmQgb3IgY3JlYXRlIHNlcnZpY2UgYXZhaWxhYmlsaXR5IGVudHJ5IGZvciB0aGUgY3VycmVudCBzZXJ2aWNlXG4gICAgICBsZXQgc2VydmljZUF2YWlsYWJpbGl0eSA9IGFsbEF2YWlsYWJpbGl0eS5maW5kKChhdmFpbDogU2VydmljZUF2YWlsYWJpbGl0eSkgPT4gYXZhaWwuc2VydmljZUlkID09PSBzZWxlY3RlZFNlcnZpY2VJZCk7XG4gICAgICBcbiAgICAgIGlmICghc2VydmljZUF2YWlsYWJpbGl0eSkge1xuICAgICAgICBzZXJ2aWNlQXZhaWxhYmlsaXR5ID0ge1xuICAgICAgICAgIHNlcnZpY2VJZDogc2VsZWN0ZWRTZXJ2aWNlSWQsXG4gICAgICAgICAgc3RhZmY6IFtdXG4gICAgICAgIH07XG4gICAgICAgIGFsbEF2YWlsYWJpbGl0eS5wdXNoKHNlcnZpY2VBdmFpbGFiaWxpdHkpO1xuICAgICAgfVxuXG4gICAgICAvLyBQcm9jZXNzIGFsbCBwZW5kaW5nIGFkZGl0aW9uc1xuICAgICAgZm9yIChjb25zdCBwZW5kaW5nIG9mIHBlbmRpbmdBdmFpbGFiaWxpdHlBZGRpdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RGF0ZSA9IHBlbmRpbmcuZGF0ZTtcbiAgICAgICAgY29uc3QgdGFyZ2V0SG91ciA9IHBlbmRpbmcuaG91cjtcbiAgICAgICAgY29uc3Qgc3RhZmZJZCA9IHBlbmRpbmcuc3RhZmZJZDtcblxuICAgICAgICAvLyBHZXQgd2Vla2RheSBuYW1lIGZyb20gdGhlIGRhdGUgKHRpbWV6b25lLWF3YXJlKVxuICAgICAgICAvLyBTdG9yZSBhcyBsb3dlcmNhc2UgdG8gbWF0Y2ggYnVpbGRFeHBhbmRlZFNsb3RzIGV4cGVjdGF0aW9uIGFuZCBBUEkgZm9ybWF0XG4gICAgICAgIGNvbnN0IHdlZWtkYXlOYW1lID0gZm9ybWF0SW5UaW1lWm9uZSh0YXJnZXREYXRlLCB0aW1lem9uZSwgeyB3ZWVrZGF5OiBcImxvbmdcIiB9KTtcbiAgICAgICAgY29uc3Qgd2Vla2RheSA9IHdlZWtkYXlOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXQgdGltZSBhcyBISDptbVxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBgJHtTdHJpbmcodGFyZ2V0SG91cikucGFkU3RhcnQoMiwgJzAnKX06MDBgO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGVuZCB0aW1lIGJhc2VkIG9uIHNlcnZpY2UgZHVyYXRpb25cbiAgICAgICAgY29uc3Qgc3RhcnRNaW51dGVzID0gdGFyZ2V0SG91ciAqIDYwO1xuICAgICAgICBjb25zdCBlbmRNaW51dGVzID0gc3RhcnRNaW51dGVzICsgc2VsZWN0ZWRTZXJ2aWNlLmR1cmF0aW9uTWludXRlcztcbiAgICAgICAgY29uc3QgZW5kSG91ciA9IE1hdGguZmxvb3IoZW5kTWludXRlcyAvIDYwKTtcbiAgICAgICAgY29uc3QgZW5kTWluID0gZW5kTWludXRlcyAlIDYwO1xuICAgICAgICBjb25zdCBlbmRUaW1lID0gYCR7U3RyaW5nKGVuZEhvdXIpLnBhZFN0YXJ0KDIsICcwJyl9OiR7U3RyaW5nKGVuZE1pbikucGFkU3RhcnQoMiwgJzAnKX1gO1xuXG4gICAgICAgIC8vIEZpbmQgb3IgY3JlYXRlIHN0YWZmIGF2YWlsYWJpbGl0eSBlbnRyeVxuICAgICAgICBsZXQgc3RhZmZBdmFpbGFiaWxpdHkgPSBzZXJ2aWNlQXZhaWxhYmlsaXR5LnN0YWZmLmZpbmQoKHM6IGFueSkgPT4gcy5zdGFmZklkID09PSBzdGFmZklkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghc3RhZmZBdmFpbGFiaWxpdHkpIHtcbiAgICAgICAgICBzdGFmZkF2YWlsYWJpbGl0eSA9IHtcbiAgICAgICAgICAgIHN0YWZmSWQ6IHN0YWZmSWQsXG4gICAgICAgICAgICBzbG90czogW11cbiAgICAgICAgICB9O1xuICAgICAgICAgIHNlcnZpY2VBdmFpbGFiaWxpdHkuc3RhZmYucHVzaChzdGFmZkF2YWlsYWJpbGl0eSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHNsb3QgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgY29uc3Qgc2xvdEV4aXN0cyA9IHN0YWZmQXZhaWxhYmlsaXR5LnNsb3RzLnNvbWUoKHNsb3Q6IEF2YWlsYWJpbGl0eVNsb3QpID0+IFxuICAgICAgICAgIHNsb3QuZGF5ID09PSB3ZWVrZGF5ICYmIHNsb3Quc3RhcnRUaW1lID09PSBzdGFydFRpbWUgJiYgc2xvdC5lbmRUaW1lID09PSBlbmRUaW1lXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFzbG90RXhpc3RzKSB7XG4gICAgICAgICAgLy8gQWRkIHRoZSBuZXcgc2xvdFxuICAgICAgICAgIHN0YWZmQXZhaWxhYmlsaXR5LnNsb3RzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGBzbG90LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgICAgICBkYXk6IHdlZWtkYXkgYXMgQXZhaWxhYmlsaXR5U2xvdFtcImRheVwiXSxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLFxuICAgICAgICAgICAgZW5kVGltZTogZW5kVGltZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNhdmUgYWxsIGNoYW5nZXMgdG8gQVBJXG4gICAgICBjb25zdCBzYXZlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9idXNpbmVzcy9vbmJvYXJkaW5nL3N0ZXAtNy1hdmFpbGFiaWxpdHknLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIC4uLihhdXRoVG9rZW4gJiYgeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGF2YWlsYWJpbGl0eTogYWxsQXZhaWxhYmlsaXR5XG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghc2F2ZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHNhdmVSZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZXJyb3IgfHwgJ0ZhaWxlZCB0byBzYXZlIGF2YWlsYWJpbGl0eScpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgc2F2ZWQgYXZhaWxhYmlsaXR5IHN0YXRlIHdpdGggdGhlIGRhdGEgd2UganVzdCBzYXZlZFxuICAgICAgLy8gYWxsQXZhaWxhYmlsaXR5IGFscmVhZHkgY29udGFpbnMgYWxsIHNlcnZpY2VzIChtZXJnZWQgZnJvbSBzYXZlZEF2YWlsYWJpbGl0eSBzdGF0ZSlcbiAgICAgIC8vIGFuZCBub3cgaGFzIHRoZSB1cGRhdGVkIHNsb3RzIGZvciB0aGUgY3VycmVudCBzZXJ2aWNlXG4gICAgICAvLyBUaGlzIHByZXNlcnZlcyBhdmFpbGFiaWxpdHkgZm9yIGFsbCBzZXJ2aWNlcyB3aXRoIHRlbXBvcmFyeSBJRHNcbiAgICAgIHNldFNhdmVkQXZhaWxhYmlsaXR5KGFsbEF2YWlsYWJpbGl0eSk7XG4gICAgICBcbiAgICAgIC8vIEV4cGFuZCB0aGUgc2F2ZWQgc2xvdHMgRklSU1QgYmVmb3JlIGNsZWFyaW5nIHBlbmRpbmcgYWRkaXRpb25zXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgYSBzbW9vdGggdHJhbnNpdGlvbiBmcm9tIHBlbmRpbmcgdG8gc2F2ZWRcbiAgICAgIGNvbnN0IHNlcnZpY2VBdmFpbCA9IGFsbEF2YWlsYWJpbGl0eS5maW5kKFxuICAgICAgICAoYXZhaWw6IFNlcnZpY2VBdmFpbGFiaWxpdHkpID0+IGF2YWlsLnNlcnZpY2VJZCA9PT0gc2VsZWN0ZWRTZXJ2aWNlSWRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChzZWxlY3RlZFNlcnZpY2UgJiYgc2VydmljZUF2YWlsKSB7XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY3VycmVudCB3ZWVrIHRvIHNob3cgYWxsIHNsb3RzIGluIHRoZSB3ZWVrIHZpZXdcbiAgICAgICAgY29uc3Qgd2Vla1N0YXJ0ID0gbmV3IERhdGUoY3VycmVudFdlZWtTdGFydCk7XG4gICAgICAgIHdlZWtTdGFydC5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4cGFuZGVkU2xvdHMgPSBidWlsZEV4cGFuZGVkU2xvdHMoe1xuICAgICAgICAgIHNlcnZpY2U6IHNlbGVjdGVkU2VydmljZSxcbiAgICAgICAgICBzZXJ2aWNlQXZhaWxhYmlsaXR5OiBzZXJ2aWNlQXZhaWwsXG4gICAgICAgICAgc3RhZmY6IHN0YWZmLFxuICAgICAgICAgIHRpbWV6b25lOiB0aW1lem9uZSxcbiAgICAgICAgICBzdGFydERhdGU6IHdlZWtTdGFydCxcbiAgICAgICAgICBob3Jpem9uRGF5czogMTQsXG4gICAgICAgICAgaW5jbHVkZVBhc3RTbG90czogdHJ1ZSAvLyBTaG93IGFsbCBzbG90cyBpbiB0aGUgY3VycmVudCB3ZWVrIHZpZXcgZm9yIG9uYm9hcmRpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgZmV0Y2hlZFNsb3RzIHdpdGggc2F2ZWQgc2xvdHMgQkVGT1JFIGNsZWFyaW5nIHBlbmRpbmdcbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHNhdmVkIHNsb3RzIGFwcGVhciBpbW1lZGlhdGVseVxuICAgICAgICBzZXRGZXRjaGVkU2xvdHMoZXhwYW5kZWRTbG90cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRGZXRjaGVkU2xvdHMoW10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhciBwZW5kaW5nIGFkZGl0aW9ucyBBRlRFUiB3ZSd2ZSB1cGRhdGVkIHRoZSBzYXZlZCBzbG90c1xuICAgICAgLy8gVGhpcyBlbnN1cmVzIHNsb3RzIHN3aXRjaCBmcm9tIFwiUGVuZGluZ1wiIHRvIFwiU2F2ZWRcIiBzbW9vdGhseVxuICAgICAgc2V0UGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucyhbXSk7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlOyAvLyBTdWNjZXNzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBhdmFpbGFiaWxpdHk6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoYEZhaWxlZCB0byBzYXZlIGF2YWlsYWJpbGl0eTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gRmFpbHVyZVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1NhdmluZ0F2YWlsYWJpbGl0eShmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNvbnRpbnVlID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIFxuICAgIC8vIEJlZm9yZSBjb250aW51aW5nLCBzYXZlIGFueSBwZW5kaW5nIGF2YWlsYWJpbGl0eVxuICAgIGlmIChwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRTZXJ2aWNlSWQpIHtcbiAgICAgIGNvbnN0IHNhdmVTdWNjZXNzID0gYXdhaXQgaGFuZGxlU2F2ZUF2YWlsYWJpbGl0eSgpO1xuICAgICAgaWYgKCFzYXZlU3VjY2Vzcykge1xuICAgICAgICAvLyBFcnJvciBhbHJlYWR5IHNldCBieSBoYW5kbGVTYXZlQXZhaWxhYmlsaXR5XG4gICAgICAgIHJldHVybjsgLy8gRG9uJ3QgY29udGludWUgaWYgc2F2ZSBmYWlsZWRcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ29udmVydCBzYXZlZCBhdmFpbGFiaWxpdHkgdG8gU2VydmljZUF2YWlsYWJpbGl0eSBmb3JtYXRcbiAgICAvLyBVc2Ugc2F2ZWQgYXZhaWxhYmlsaXR5IGZyb20gdGhpcyBzZXNzaW9uLCBvciBjb252ZXJ0IHBlbmRpbmcgaWYgbm90aGluZyBzYXZlZCB5ZXRcbiAgICBsZXQgcmVzdWx0ID0gc2F2ZWRBdmFpbGFiaWxpdHkubGVuZ3RoID4gMCA/IHNhdmVkQXZhaWxhYmlsaXR5IDogW107XG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSBubyBzYXZlZCBhdmFpbGFiaWxpdHkgYnV0IGhhdmUgcGVuZGluZywgY29udmVydCBwZW5kaW5nXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDAgJiYgcGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5sZW5ndGggPiAwICYmIHNlbGVjdGVkU2VydmljZUlkKSB7XG4gICAgICByZXN1bHQgPSBtYXBQZW5kaW5nVG9TZXJ2aWNlQXZhaWxhYmlsaXR5KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoYXQgc2VydmljZXMgd2l0aCBzdGFmZiBoYXZlIGF0IGxlYXN0IG9uZSBzbG90XG4gICAgY29uc3Qgc2VydmljZXNOZWVkaW5nQXZhaWxhYmlsaXR5ID0gcmVzdWx0LmZpbHRlcihcbiAgICAgIChzZXJ2aWNlKSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgc2VydmljZSBoYXMgc3RhZmYgYXNzaWduZWRcbiAgICAgICAgY29uc3Qgc2VydmljZURlZiA9IGFsbFNlcnZpY2VzLmZpbmQocyA9PiBzLmlkID09PSBzZXJ2aWNlLnNlcnZpY2VJZCk7XG4gICAgICAgIGlmICghc2VydmljZURlZiB8fCBzZXJ2aWNlRGVmLnN0YWZmSWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHN0YWZmIGhhdmUgc2xvdHNcbiAgICAgICAgcmV0dXJuIHNlcnZpY2Uuc3RhZmYubGVuZ3RoID4gMCAmJlxuICAgICAgICAgIHNlcnZpY2Uuc3RhZmYuZXZlcnkoKHN0YWZmRW50cnkpID0+IHN0YWZmRW50cnkuc2xvdHMubGVuZ3RoID09PSAwKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKHNlcnZpY2VzTmVlZGluZ0F2YWlsYWJpbGl0eS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNlcnZpY2VEZWYgPSBhbGxTZXJ2aWNlcy5maW5kKHMgPT4gcy5pZCA9PT0gc2VydmljZXNOZWVkaW5nQXZhaWxhYmlsaXR5WzBdLnNlcnZpY2VJZCk7XG4gICAgICBzZXRFcnJvcihcbiAgICAgICAgYEFkZCBhdCBsZWFzdCBvbmUgYXZhaWxhYmlsaXR5IHNsb3QgZm9yIHNlcnZpY2UgXCIke3NlcnZpY2VEZWY/Lm5hbWUgfHwgc2VydmljZXNOZWVkaW5nQXZhaWxhYmlsaXR5WzBdLnNlcnZpY2VJZH1cIi4gRWFjaCBzZXJ2aWNlIHdpdGggc3RhZmYgbmVlZHMgYXZhaWxhYmlsaXR5IHRvIGFwcGVhciBpbiBib29raW5nLmBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgb25OZXh0KHJlc3VsdCk7XG4gIH07XG5cbiAgY29uc3QgbWFwUGVuZGluZ1RvU2VydmljZUF2YWlsYWJpbGl0eSA9ICgpOiBTZXJ2aWNlQXZhaWxhYmlsaXR5W10gPT4ge1xuICAgIC8vIFRoaXMgaXMgYSBmYWxsYmFjayBpZiBubyBjdXJyZW50IGF2YWlsYWJpbGl0eSBleGlzdHNcbiAgICAvLyBDb252ZXJ0IHBlbmRpbmcgYWRkaXRpb25zIHRvIFNlcnZpY2VBdmFpbGFiaWxpdHkgZm9ybWF0XG4gICAgY29uc3QgcmVzdWx0OiBTZXJ2aWNlQXZhaWxhYmlsaXR5W10gPSBbXTtcbiAgICBcbiAgICBpZiAoIXNlbGVjdGVkU2VydmljZUlkIHx8IHBlbmRpbmdBdmFpbGFiaWxpdHlBZGRpdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXJ2aWNlQXZhaWxhYmlsaXR5OiBTZXJ2aWNlQXZhaWxhYmlsaXR5ID0ge1xuICAgICAgc2VydmljZUlkOiBzZWxlY3RlZFNlcnZpY2VJZCxcbiAgICAgIHN0YWZmOiBbXVxuICAgIH07XG4gICAgXG4gICAgY29uc3Qgc3RhZmZNYXAgPSBuZXcgTWFwPHN0cmluZywgQXZhaWxhYmlsaXR5U2xvdFtdPigpO1xuICAgIFxuICAgIGNvbnN0IHNlbGVjdGVkU2VydmljZSA9IGFsbFNlcnZpY2VzLmZpbmQocyA9PiBzLmlkID09PSBzZWxlY3RlZFNlcnZpY2VJZCk7XG4gICAgaWYgKCFzZWxlY3RlZFNlcnZpY2UpIHJldHVybiByZXN1bHQ7XG4gICAgXG4gICAgZm9yIChjb25zdCBwZW5kaW5nIG9mIHBlbmRpbmdBdmFpbGFiaWxpdHlBZGRpdGlvbnMpIHtcbiAgICAgIGNvbnN0IHN0YWZmSWQgPSBwZW5kaW5nLnN0YWZmSWQ7XG4gICAgICBjb25zdCB0YXJnZXREYXRlID0gcGVuZGluZy5kYXRlO1xuICAgICAgY29uc3QgdGFyZ2V0SG91ciA9IHBlbmRpbmcuaG91cjtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgd2Vla2RheSBhcyBsb3dlcmNhc2UgdG8gbWF0Y2ggYnVpbGRFeHBhbmRlZFNsb3RzIGV4cGVjdGF0aW9uIGFuZCBBUEkgZm9ybWF0XG4gICAgICBjb25zdCB3ZWVrZGF5TmFtZSA9IGZvcm1hdEluVGltZVpvbmUodGFyZ2V0RGF0ZSwgdGltZXpvbmUsIHsgd2Vla2RheTogXCJsb25nXCIgfSk7XG4gICAgICBjb25zdCB3ZWVrZGF5ID0gd2Vla2RheU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGAke1N0cmluZyh0YXJnZXRIb3VyKS5wYWRTdGFydCgyLCAnMCcpfTowMGA7XG4gICAgICBjb25zdCBzdGFydE1pbnV0ZXMgPSB0YXJnZXRIb3VyICogNjA7XG4gICAgICBjb25zdCBlbmRNaW51dGVzID0gc3RhcnRNaW51dGVzICsgc2VsZWN0ZWRTZXJ2aWNlLmR1cmF0aW9uTWludXRlcztcbiAgICAgIGNvbnN0IGVuZEhvdXIgPSBNYXRoLmZsb29yKGVuZE1pbnV0ZXMgLyA2MCk7XG4gICAgICBjb25zdCBlbmRNaW4gPSBlbmRNaW51dGVzICUgNjA7XG4gICAgICBjb25zdCBlbmRUaW1lID0gYCR7U3RyaW5nKGVuZEhvdXIpLnBhZFN0YXJ0KDIsICcwJyl9OiR7U3RyaW5nKGVuZE1pbikucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgXG4gICAgICBpZiAoIXN0YWZmTWFwLmhhcyhzdGFmZklkKSkge1xuICAgICAgICBzdGFmZk1hcC5zZXQoc3RhZmZJZCwgW10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBzbG90cyA9IHN0YWZmTWFwLmdldChzdGFmZklkKSE7XG4gICAgICBjb25zdCBzbG90RXhpc3RzID0gc2xvdHMuc29tZShzbG90ID0+IFxuICAgICAgICBzbG90LmRheSA9PT0gd2Vla2RheSAmJiBzbG90LnN0YXJ0VGltZSA9PT0gc3RhcnRUaW1lICYmIHNsb3QuZW5kVGltZSA9PT0gZW5kVGltZVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKCFzbG90RXhpc3RzKSB7XG4gICAgICAgIHNsb3RzLnB1c2goe1xuICAgICAgICAgIGlkOiBgc2xvdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgICAgIGRheTogd2Vla2RheSBhcyBBdmFpbGFiaWxpdHlTbG90W1wiZGF5XCJdLFxuICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGVuZFRpbWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZvciAoY29uc3QgW3N0YWZmSWQsIHNsb3RzXSBvZiBzdGFmZk1hcC5lbnRyaWVzKCkpIHtcbiAgICAgIHNlcnZpY2VBdmFpbGFiaWxpdHkuc3RhZmYucHVzaCh7IHN0YWZmSWQsIHNsb3RzIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc2VydmljZUF2YWlsYWJpbGl0eS5zdGFmZi5sZW5ndGggPiAwKSB7XG4gICAgICByZXN1bHQucHVzaChzZXJ2aWNlQXZhaWxhYmlsaXR5KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVGaWxsVGVzdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdGVzdERhdGEgPSBnZW5lcmF0ZUF2YWlsYWJpbGl0eURhdGEoc2VydmljZXMsIHN0YWZmKTtcbiAgICAvLyBTYXZlIHRlc3QgZGF0YSB2aWEgQVBJXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50Q2xpZW50KCk7XG4gICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IHNlc3Npb24/LmFjY2Vzc190b2tlbjtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9idXNpbmVzcy9vbmJvYXJkaW5nL3N0ZXAtNy1hdmFpbGFiaWxpdHknLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIC4uLihhdXRoVG9rZW4gJiYgeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmFpbGFiaWxpdHk6IHRlc3REYXRhIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBzZXRTYXZlZEF2YWlsYWJpbGl0eSh0ZXN0RGF0YSk7XG4gICAgICAgIGlmIChzZWxlY3RlZFNlcnZpY2VJZCkge1xuICAgICAgICAgIGNvbnN0IHNlcnZpY2VBdmFpbCA9IHRlc3REYXRhLmZpbmQoKGF2YWlsOiBTZXJ2aWNlQXZhaWxhYmlsaXR5KSA9PiBhdmFpbC5zZXJ2aWNlSWQgPT09IHNlbGVjdGVkU2VydmljZUlkKTtcbiAgICAgICAgICBjb25zdCBzZWxlY3RlZFNlcnZpY2UgPSBhbGxTZXJ2aWNlcy5maW5kKHMgPT4gcy5pZCA9PT0gc2VsZWN0ZWRTZXJ2aWNlSWQpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZFNlcnZpY2UgJiYgc2VydmljZUF2YWlsKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZFNsb3RzID0gYnVpbGRFeHBhbmRlZFNsb3RzKHtcbiAgICAgICAgICAgICAgc2VydmljZTogc2VsZWN0ZWRTZXJ2aWNlLFxuICAgICAgICAgICAgICBzZXJ2aWNlQXZhaWxhYmlsaXR5OiBzZXJ2aWNlQXZhaWwsXG4gICAgICAgICAgICAgIHN0YWZmOiBzdGFmZixcbiAgICAgICAgICAgICAgdGltZXpvbmU6IHRpbWV6b25lLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IHRvZGF5LFxuICAgICAgICAgICAgICBob3Jpem9uRGF5czogMTRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0RmV0Y2hlZFNsb3RzKGV4cGFuZGVkU2xvdHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmlsbGluZyB0ZXN0IGRhdGE6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHRlc3QgZGF0YScpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBtb250aFllYXIgPSBmb3JtYXRJblRpbWVab25lKHdlZWtEYXlzWzBdLCB0aW1lem9uZSwgeyBtb250aDogXCJsb25nXCIsIHllYXI6IFwibnVtZXJpY1wiIH0pO1xuICBjb25zdCBzZWxlY3RlZFNlcnZpY2UgPSBhbGxTZXJ2aWNlcy5maW5kKHMgPT4gcy5pZCA9PT0gc2VsZWN0ZWRTZXJ2aWNlSWQpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LThcIiBhcmlhLWxhYmVsbGVkYnk9XCJhdmFpbGFiaWxpdHktc3RlcC1oZWFkaW5nXCI+XG4gICAgICA8aGVhZGVyIGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItcHJpbWFyeS8zMCBiZy1wcmltYXJ5LzEwIHB4LTQgcHktMSB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgdGV4dC1wcmltYXJ5LzkwXCI+XG4gICAgICAgICAgPENhbGVuZGFyQ2hlY2syIGNsYXNzTmFtZT1cImgtNCB3LTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgIFN0ZXAgNyDCtyBBdmFpbGFiaWxpdHlcbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8aDIgaWQ9XCJhdmFpbGFiaWxpdHktc3RlcC1oZWFkaW5nXCIgY2xhc3NOYW1lPVwiZm9udC1kaXNwbGF5IHRleHQtM3hsIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICBTZXQgYXZhaWxhYmlsaXR5IGJ5IGNsaWNraW5nIHRpbWUgc2xvdHNcbiAgICAgICAgPC9oMj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibWF4LXctM3hsIHRleHQtYmFzZSB0ZXh0LXdoaXRlLzcwXCI+XG4gICAgICAgICAgU2VsZWN0IGEgc2VydmljZSBhbmQgc3RhZmYgbWVtYmVyLCB0aGVuIGNsaWNrIGVtcHR5IHRpbWUgc2xvdHMgdG8gYWRkIGF2YWlsYWJpbGl0eS4gQ2xpY2sgYWdhaW4gdG8gcmVtb3ZlLiBDbGljayBcIlNhdmUgQXZhaWxhYmlsaXR5XCIgd2hlbiBkb25lLCB0aGVuIGNvbnRpbnVlIHRvIHRoZSBuZXh0IHN0ZXAuIFRoaXMgYXZhaWxhYmlsaXR5IHdpbGwgYmUgdXNlZCBpbiB5b3VyIGJvb2tpbmcgZmxvdy5cbiAgICAgICAgPC9wPlxuICAgICAgPC9oZWFkZXI+XG5cbiAgICAgIHsvKiBTZXJ2aWNlIERyb3Bkb3duICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLTN4bCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIGJnLXdoaXRlLzUgcC02XCI+XG4gICAgICAgIDxMYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzcwIG1iLTIgYmxvY2tcIj5GaWx0ZXIgYnkgU2VydmljZTwvTGFiZWw+XG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xNSBiZy1bIzA1MEYyQ10vNjAgcHgtNCBweS0zIHRleHQtc20gdGV4dC13aGl0ZSBmb2N1czpib3JkZXItcHJpbWFyeSBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZFNlcnZpY2VJZCB8fCBcIlwifVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRTZXJ2aWNlSWQoZS50YXJnZXQudmFsdWUgfHwgbnVsbCk7XG4gICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGF2YWlsYWJpbGl0eSB3aGVuIGNoYW5naW5nIHNlcnZpY2VcbiAgICAgICAgICAgIHNldFBlbmRpbmdBdmFpbGFiaWxpdHlBZGRpdGlvbnMoW10pO1xuICAgICAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIiBjbGFzc05hbWU9XCJiZy1bIzA1MEYyQ10gdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgQWxsIFNlcnZpY2VzXG4gICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAge2FsbFNlcnZpY2VzLm1hcCgoc2VydmljZSkgPT4gKFxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3NlcnZpY2UuaWR9IHZhbHVlPXtzZXJ2aWNlLmlkfSBjbGFzc05hbWU9XCJiZy1bIzA1MEYyQ10gdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgICB7c2VydmljZS5jYXRlZ29yeU5hbWV9IC0ge3NlcnZpY2UubmFtZX0gKHtzZXJ2aWNlLmR1cmF0aW9uTWludXRlc30gbWluIMK3ICRcbiAgICAgICAgICAgICAgeyhzZXJ2aWNlLnByaWNlQ2VudHMgLyAxMDApLnRvRml4ZWQoMil9KVxuICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICB7c2VsZWN0ZWRTZXJ2aWNlICYmIChcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgdGV4dC13aGl0ZS82MFwiPlxuICAgICAgICAgICAgU2hvd2luZyBhdmFpbGFiaWxpdHkgZm9yOiA8c3Ryb25nIGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIj57c2VsZWN0ZWRTZXJ2aWNlLm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgPC9wPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBTdGFmZiBTZWxlY3Rpb24gUGlsbHMgLSBPbmx5IHNob3cgd2hlbiBzZXJ2aWNlIGlzIHNlbGVjdGVkICovfVxuICAgICAge3NlbGVjdGVkU2VydmljZUlkICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLTN4bCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIGJnLXdoaXRlLzUgcC02XCI+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNzAgbWItMyBibG9ja1wiPlNlbGVjdCBTdGFmZiBNZW1iZXI8L0xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICA8U3RhZmZQaWxsXG4gICAgICAgICAgICAgIGxhYmVsPVwiQWxsIFN0YWZmXCJcbiAgICAgICAgICAgICAgYWN0aXZlPXtzZWxlY3RlZFN0YWZmSWQgPT09IFwiYW55XCJ9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFN0YWZmSWQoXCJhbnlcIik7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgY2xlYXIgcGVuZGluZyAtIGtlZXAgYWxsIHBlbmRpbmcgc2xvdHMgdmlzaWJsZVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHtzdGFmZlxuICAgICAgICAgICAgICAuZmlsdGVyKG1lbWJlciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlci5hY3RpdmUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gT25seSBzaG93IHN0YWZmIGFzc2lnbmVkIHRvIHRoaXMgc2VydmljZVxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFNlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZFNlcnZpY2Uuc3RhZmZJZHMuaW5jbHVkZXMobWVtYmVyLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5tYXAoKG1lbWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8U3RhZmZQaWxsXG4gICAgICAgICAgICAgICAgICAgIGtleT17bWVtYmVyLmlkfVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17bWVtYmVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yPXttZW1iZXIuY29sb3J9XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17c2VsZWN0ZWRTdGFmZklkID09PSBtZW1iZXIuaWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjbGVhciBwZW5kaW5nIC0ga2VlcCBhbGwgcGVuZGluZyBzbG90cyB2aXNpYmxlIHdoZW4gc3dpdGNoaW5nIHN0YWZmXG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRTdGFmZklkKG1lbWJlci5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPEhlbHBlclRleHQgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LXdoaXRlLzUwXCI+XG4gICAgICAgICAgICB7c2VsZWN0ZWRTdGFmZklkID09PSBcImFueVwiIFxuICAgICAgICAgICAgICA/IFwiU2VsZWN0IGEgc3RhZmYgbWVtYmVyIGFib3ZlLCB0aGVuIGNsaWNrIGVtcHR5IHRpbWUgc2xvdHMgdG8gYWRkIGF2YWlsYWJpbGl0eVwiXG4gICAgICAgICAgICAgIDogYEFkZGluZyBhdmFpbGFiaWxpdHkgZm9yICR7c3RhZmYuZmluZChzID0+IHMuaWQgPT09IHNlbGVjdGVkU3RhZmZJZCk/Lm5hbWV9LiBDbGljayBlbXB0eSB0aW1lIHNsb3RzIHRvIGFkZCBhdmFpbGFiaWxpdHkuIENsaWNrIFwiU2F2ZVwiIHdoZW4gZG9uZS5gfVxuICAgICAgICAgIDwvSGVscGVyVGV4dD5cbiAgICAgICAgICB7cGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1wcmltYXJ5LzQwIGJnLXByaW1hcnkvMTAgcHgtNCBweS0zXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgIHtwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zLmxlbmd0aH0gYXZhaWxhYmlsaXR5IHNsb3R7cGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucy5sZW5ndGggPiAxID8gJ3MnIDogJyd9IHBlbmRpbmdcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlLzYwXCI+XG4gICAgICAgICAgICAgICAgICBDbGljayBcIlNhdmVcIiB0byBhcHBseSBjaGFuZ2VzIHRvIHRoZSBib29raW5nIHN5c3RlbVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCIgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRQZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zKFtdKX0gXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTYXZpbmdBdmFpbGFiaWxpdHl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ2xlYXJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZUF2YWlsYWJpbGl0eX0gXG4gICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzU2F2aW5nQXZhaWxhYmlsaXR5fSBcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1NhdmluZ0F2YWlsYWJpbGl0eX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2F2ZSBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICAgU2F2ZSBBdmFpbGFiaWxpdHlcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBXZWVrIE5hdmlnYXRpb24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkLTN4bCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIGJnLXdoaXRlLzUgcHgtNiBweS00XCI+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG5hdmlnYXRlV2VlayhcInByZXZcIil9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS83MCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxDaGV2cm9uTGVmdCBjbGFzc05hbWU9XCJoLTUgdy01XCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtd2hpdGVcIj57bW9udGhZZWFyfTwvaDM+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlLzYwXCI+XG4gICAgICAgICAgICB7Zm9ybWF0SW5UaW1lWm9uZSh3ZWVrRGF5c1swXSwgdGltZXpvbmUsIHsgbW9udGg6IFwic2hvcnRcIiwgZGF5OiBcIm51bWVyaWNcIiB9KX0gLXtcIiBcIn1cbiAgICAgICAgICAgIHtmb3JtYXRJblRpbWVab25lKHdlZWtEYXlzWzZdLCB0aW1lem9uZSwgeyBtb250aDogXCJzaG9ydFwiLCBkYXk6IFwibnVtZXJpY1wiIH0pfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG5hdmlnYXRlV2VlayhcIm5leHRcIil9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS83MCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPVwiaC01IHctNVwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBDYWxlbmRhciBHcmlkIC0gTWF0Y2hpbmcgQWRtaW4gVmlldyBTdHlsZSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC0zeGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCBiZy13aGl0ZS81IHAtOCBzaGFkb3ctWzBfMF82MHB4X3JnYmEoOTEsMTAwLDI1NSwwLjE1KV1cIj5cbiAgICAgICAgeyFzZWxlY3RlZFNlcnZpY2VJZCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtM3hsIGJvcmRlciBib3JkZXItd2hpdGUvMTAgYmctYmxhY2svNjAgcC04IHRleHQtY2VudGVyIHRleHQtd2hpdGUvNjBcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmFzZVwiPlNlbGVjdCBhIHNlcnZpY2UgYWJvdmUgdG8gYWRkIGF2YWlsYWJpbGl0eTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJmbG93LXgtYXV0b1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4tdy1mdWxsXCI+XG4gICAgICAgICAgICAgIHsvKiBEYXkgSGVhZGVycyAqL31cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy04IGdhcC0yIGJvcmRlci1iIGJvcmRlci13aGl0ZS8xMCBwYi0yXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZS82MFwiPlRpbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICB7d2Vla0RheXMubWFwKChkYXksIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtd2hpdGUvNjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0SW5UaW1lWm9uZShkYXksIHRpbWV6b25lLCB7IHdlZWtkYXk6IFwic2hvcnRcIiB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRJblRpbWVab25lKGRheSwgdGltZXpvbmUsIHsgZGF5OiBcIm51bWVyaWNcIiB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBIb3VyIFJvd3MgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAgICB7aG91cnMubWFwKChob3VyKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBob3VyTGFiZWwgPSBob3VyID09PSAxMiA/IFwiMTIgUE1cIiA6IGhvdXIgPiAxMiA/IGAke2hvdXIgLSAxMn0gUE1gIDogYCR7aG91cn0gQU1gO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2hvdXJ9IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHRleHQteHMgdGV4dC13aGl0ZS82MCBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aG91ckxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIHt3ZWVrRGF5cy5tYXAoKGRheSwgZGF5SWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gZm9ybWF0SW5UaW1lWm9uZShkYXksIHRpbWV6b25lLCBcInl5eXktTU0tZGRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG90c0ZvckhvdXIgPSBzbG90c0J5RGF5QW5kSG91cltkYXRlS2V5XT8uW2hvdXJdIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZGF5SWR4fSBjbGFzc05hbWU9XCJweS0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBTaG93IGF2YWlsYWJsZSBzbG90cyAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzbG90c0ZvckhvdXIubWFwKChzbG90KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YWZmTWVtYmVyID0gc3RhZmYuZmluZChzID0+IHMuaWQgPT09IHNsb3Quc3RhZmZJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUGVuZGluZyA9IHNsb3QuaWQgJiYgc2xvdC5pZC5zdGFydHNXaXRoKCdwZW5kaW5nLScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkU3RhZmYgPSBzZWxlY3RlZFN0YWZmSWQgIT09IFwiYW55XCIgJiYgc2xvdC5zdGFmZklkID09PSBzZWxlY3RlZFN0YWZmSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c2xvdC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aXNQZW5kaW5nICYmIGlzU2VsZWN0ZWRTdGFmZiA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHBlbmRpbmcgc2xvdCBvbiBjbGlja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG90RGF0ZUtleSA9IGZvcm1hdEluVGltZVpvbmUoZGF5LCB0aW1lem9uZSwgXCJ5eXl5LU1NLWRkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBlbmRpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZ0RhdGVLZXkgPSBmb3JtYXRJblRpbWVab25lKHBlbmRpbmcuZGF0ZSwgdGltZXpvbmUsIFwieXl5eS1NTS1kZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEocGVuZGluZy5zdGFmZklkID09PSBzbG90LnN0YWZmSWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRGF0ZUtleSA9PT0gc2xvdERhdGVLZXkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLmhvdXIgPT09IGhvdXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgcm91bmRlZC1sZyBib3JkZXIgcHgtMiBweS0xLjUgdGV4dC1sZWZ0IHRyYW5zaXRpb24gZm9jdXMtdmlzaWJsZTpvdXRsaW5lLW5vbmUgZm9jdXMtdmlzaWJsZTpyaW5nLTIgZm9jdXMtdmlzaWJsZTpyaW5nLXByaW1hcnkvNzAgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJvcmRlci1wcmltYXJ5LzYwIGJnLXByaW1hcnkvMjAgaG92ZXI6Ym9yZGVyLXJlZC01MDAvNjAgaG92ZXI6YmctcmVkLTUwMC8yMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJvcmRlci1wcmltYXJ5LzQwIGJnLXByaW1hcnkvMjAgaG92ZXI6Ym9yZGVyLXByaW1hcnkvNjAgaG92ZXI6YmctcHJpbWFyeS8zMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBzdGFmZk1lbWJlcj8uY29sb3IgPyBgJHtzdGFmZk1lbWJlci5jb2xvcn04MGAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogc3RhZmZNZW1iZXI/LmNvbG9yID8gYCR7c3RhZmZNZW1iZXIuY29sb3J9MjBgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtpc1BlbmRpbmcgJiYgaXNTZWxlY3RlZFN0YWZmID8gXCJDbGljayB0byByZW1vdmVcIiA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0SW5UaW1lWm9uZShuZXcgRGF0ZShzbG90LnN0YXJ0RGF0ZVRpbWUpLCB0aW1lem9uZSwgeyBob3VyOiBcIm51bWVyaWNcIiwgbWludXRlOiBcIjItZGlnaXRcIiB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtd2hpdGUvNzAgbXQtMC41IHRydW5jYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzbG90LnN0YWZmTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17YHRleHQtWzEwcHhdIG10LTAuNSB0cnVuY2F0ZSAke2lzUGVuZGluZyA/IFwidGV4dC1wcmltYXJ5LzkwIGZvbnQtc2VtaWJvbGRcIiA6IFwidGV4dC1lbWVyYWxkLTQwMC85MCBmb250LXNlbWlib2xkXCJ9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1BlbmRpbmcgPyBcIuKckyBQZW5kaW5nXCIgOiBcIuKckyBTYXZlZFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBTaG93IGVtcHR5IHN0YXRlIGlmIG5vIHNsb3RzIC0gbWFrZSBpdCBjbGlja2FibGUgdG8gYWRkIGF2YWlsYWJpbGl0eSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzbG90c0ZvckhvdXIubGVuZ3RoID09PSAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUVtcHR5U2xvdENsaWNrKGRheSwgaG91cil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCByb3VuZGVkLWxnIGJnLXdoaXRlLzUgYm9yZGVyIGJvcmRlci13aGl0ZS81IGhvdmVyOmJvcmRlci1wcmltYXJ5LzQwIGhvdmVyOmJnLXByaW1hcnkvMTAgcHktMS41IHRyYW5zaXRpb24gY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQ2xpY2sgdG8gYWRkIGF2YWlsYWJpbGl0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB0ZXh0LXdoaXRlLzIwIHRleHQtY2VudGVyXCI+KyBBZGQ8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAge2Vycm9yID8gKFxuICAgICAgICA8SGVscGVyVGV4dCBpbnRlbnQ9XCJlcnJvclwiIHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIHtlcnJvcn1cbiAgICAgICAgPC9IZWxwZXJUZXh0PlxuICAgICAgKSA6IG51bGx9XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBnYXAtM1wiPlxuICAgICAgICA8VGVzdERhdGFCdXR0b24gb25DbGljaz17aGFuZGxlRmlsbFRlc3REYXRhfSAvPlxuICAgICAgPC9kaXY+XG5cblxuICAgICAgPFN0ZXBBY3Rpb25zIG9uQmFjaz17b25CYWNrfSBvbk5leHQ9e2hhbmRsZUNvbnRpbnVlfSAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBBZGRBdmFpbGFiaWxpdHlNb2RhbCh7XG4gIGRhdGUsXG4gIGhvdXIsXG4gIHNlcnZpY2UsXG4gIHN0YWZmLFxuICBvblNlbGVjdFN0YWZmLFxuICBvbkNhbmNlbCxcbiAgaXNTYXZpbmcsXG4gIHRpbWV6b25lXG59OiB7XG4gIGRhdGU6IERhdGU7XG4gIGhvdXI6IG51bWJlcjtcbiAgc2VydmljZTogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IGR1cmF0aW9uTWludXRlczogbnVtYmVyOyBjYXRlZ29yeU5hbWU/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcbiAgc3RhZmY6IFN0YWZmTWVtYmVyW107XG4gIG9uU2VsZWN0U3RhZmY6IChzdGFmZklkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsOiAoKSA9PiB2b2lkO1xuICBpc1NhdmluZzogYm9vbGVhbjtcbiAgdGltZXpvbmU6IHN0cmluZztcbn0pIHtcbiAgaWYgKCFzZXJ2aWNlKSByZXR1cm4gbnVsbDtcblxuICAvLyBDYWxjdWxhdGUgZW5kIHRpbWVcbiAgY29uc3Qgc3RhcnRNaW51dGVzID0gaG91ciAqIDYwO1xuICBjb25zdCBlbmRNaW51dGVzID0gc3RhcnRNaW51dGVzICsgc2VydmljZS5kdXJhdGlvbk1pbnV0ZXM7XG4gIGNvbnN0IGVuZEhvdXIgPSBNYXRoLmZsb29yKGVuZE1pbnV0ZXMgLyA2MCk7XG4gIGNvbnN0IGVuZE1pbiA9IGVuZE1pbnV0ZXMgJSA2MDtcbiAgY29uc3Qgc3RhcnRUaW1lU3RyID0gYCR7U3RyaW5nKGhvdXIpLnBhZFN0YXJ0KDIsICcwJyl9OjAwYDtcbiAgY29uc3QgZW5kVGltZVN0ciA9IGAke1N0cmluZyhlbmRIb3VyKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyhlbmRNaW4pLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrLzgwIHB4LTQgcHktOFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBtYXgtaC1bOTB2aF0gdy1mdWxsIG1heC13LTJ4bCBvdmVyZmxvdy15LWF1dG8gcm91bmRlZC0zeGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCBiZy1ibGFjay85MCBwLTggc2hhZG93LVswXzYwcHhfMTYwcHhfcmdiYSg0LDEyLDM1LDAuNyldXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC02IHRvcC02IHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIGJnLXdoaXRlLzUgcHgtNCBweS0xIHRleHQteHMgZm9udC1zZW1pYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSB0ZXh0LXdoaXRlLzcwIHRyYW5zaXRpb24gaG92ZXI6dGV4dC13aGl0ZVwiXG4gICAgICAgICAgb25DbGljaz17b25DYW5jZWx9XG4gICAgICAgICAgZGlzYWJsZWQ9e2lzU2F2aW5nfVxuICAgICAgICA+XG4gICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwic3BhY2UteS0yIHByLTE2XCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImZvbnQtZGlzcGxheSB0ZXh0LTN4bCB0ZXh0LXdoaXRlXCI+QWRkIEF2YWlsYWJpbGl0eTwvaDI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXdoaXRlLzYwXCI+XG4gICAgICAgICAgICBTZWxlY3QgYSBzdGFmZiBtZW1iZXIgdG8gYWRkIGF2YWlsYWJpbGl0eSBmb3IgdGhpcyB0aW1lIHNsb3QuXG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2hlYWRlcj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTggc3BhY2UteS02XCI+XG4gICAgICAgICAgey8qIFNlcnZpY2UgSW5mbyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItd2hpdGUvMTAgYmctYmxhY2svNzAgcC00XCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIHRleHQtd2hpdGUvNTAgbWItNFwiPlxuICAgICAgICAgICAgICBTZXJ2aWNlXG4gICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZSBmb250LXNlbWlib2xkXCI+e3NlcnZpY2UubmFtZX08L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC13aGl0ZS83MFwiPntzZXJ2aWNlLmR1cmF0aW9uTWludXRlc30gbWludXRlczwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFRpbWUgU2xvdCBJbmZvICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCBiZy1ibGFjay83MCBwLTRcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgdGV4dC13aGl0ZS81MCBtYi00XCI+XG4gICAgICAgICAgICAgIFRpbWUgU2xvdFxuICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0SW5UaW1lWm9uZShkYXRlLCB0aW1lem9uZSwge1xuICAgICAgICAgICAgICAgICAgd2Vla2RheTogXCJsb25nXCIsXG4gICAgICAgICAgICAgICAgICBtb250aDogXCJzaG9ydFwiLFxuICAgICAgICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICB7c3RhcnRUaW1lU3RyfSAtIHtlbmRUaW1lU3RyfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBTdGFmZiBTZWxlY3Rpb24gKi99XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzcwIG1iLTIgYmxvY2tcIj5TZWxlY3QgU3RhZmYgTWVtYmVyPC9MYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIHtzdGFmZi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXdoaXRlLzYwXCI+Tm8gc3RhZmYgbWVtYmVycyBhdmFpbGFibGU8L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgc3RhZmYubWFwKChtZW1iZXIpID0+IChcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAga2V5PXttZW1iZXIuaWR9XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdFN0YWZmKG1lbWJlci5pZCl9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1NhdmluZ31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItd2hpdGUvMTUgYmctWyMwNTBGMkNdLzYwIHB4LTQgcHktMyB0ZXh0LWxlZnQgdHJhbnNpdGlvbiBob3Zlcjpib3JkZXItcHJpbWFyeSBob3ZlcjpiZy1wcmltYXJ5LzEwIGZvY3VzOmJvcmRlci1wcmltYXJ5IGZvY3VzOm91dGxpbmUtbm9uZSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IG1lbWJlci5jb2xvciA/IGAke21lbWJlci5jb2xvcn04MGAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyLmNvbG9yICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC00IHctNCByb3VuZGVkLWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IG1lbWJlci5jb2xvciB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZVwiPnttZW1iZXIubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyLnJvbGUgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtd2hpdGUvNjBcIj57bWVtYmVyLnJvbGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBBY3Rpb24gQnV0dG9ucyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0zXCI+XG4gICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwiZ2hvc3RcIiBvbkNsaWNrPXtvbkNhbmNlbH0gZGlzYWJsZWQ9e2lzU2F2aW5nfT5cbiAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBTdGFmZlBpbGwoe1xuICBsYWJlbCxcbiAgY29sb3IsXG4gIGFjdGl2ZSxcbiAgb25DbGlja1xufToge1xuICBsYWJlbDogc3RyaW5nO1xuICBjb2xvcj86IHN0cmluZztcbiAgYWN0aXZlOiBib29sZWFuO1xuICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xufSkge1xuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgIGNsYXNzTmFtZT17YHJvdW5kZWQtZnVsbCBib3JkZXIgcHgtNCBweS0yIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbiBmb2N1cy12aXNpYmxlOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctcHJpbWFyeS83MCBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTIgZm9jdXMtdmlzaWJsZTpyaW5nLW9mZnNldC1ibGFjayAke1xuICAgICAgICBhY3RpdmUgXG4gICAgICAgICAgPyBcImJvcmRlci13aGl0ZS82MCBiZy13aGl0ZS8xNSB0ZXh0LXdoaXRlXCIgXG4gICAgICAgICAgOiBcImJvcmRlci13aGl0ZS8xMCBiZy13aGl0ZS81IHRleHQtd2hpdGUvNjAgaG92ZXI6dGV4dC13aGl0ZS84MFwiXG4gICAgICB9YH1cbiAgICAgIHN0eWxlPXthY3RpdmUgJiYgY29sb3IgPyB7IGJvcmRlckNvbG9yOiBjb2xvciwgYm94U2hhZG93OiBgMCAwIDI1cHggJHtjb2xvcn0zM2AgfSA6IHVuZGVmaW5lZH1cbiAgICA+XG4gICAgICB7bGFiZWx9XG4gICAgPC9idXR0b24+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlTWVtbyIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiQ2hldnJvbkxlZnQiLCJDaGV2cm9uUmlnaHQiLCJTYXZlIiwiQ2FsZW5kYXJDaGVjazIiLCJYIiwiQnV0dG9uIiwiSGVscGVyVGV4dCIsIkxhYmVsIiwiU3RlcEFjdGlvbnMiLCJUZXN0RGF0YUJ1dHRvbiIsImdlbmVyYXRlQXZhaWxhYmlsaXR5RGF0YSIsImZvcm1hdEluVGltZVpvbmUiLCJ6b25lZE1pbnV0ZXNUb0RhdGUiLCJidWlsZEV4cGFuZGVkU2xvdHMiLCJncm91cFNsb3RzQnlEYXkiLCJjcmVhdGVDbGllbnRDbGllbnQiLCJBdmFpbGFiaWxpdHlTdGVwIiwic2VydmljZXMiLCJzdGFmZiIsImRlZmF1bHRWYWx1ZXMiLCJvbk5leHQiLCJvbkJhY2siLCJ0aW1lem9uZSIsImN1cnJlbnRXZWVrU3RhcnQiLCJzZXRDdXJyZW50V2Vla1N0YXJ0IiwidG9kYXkiLCJEYXRlIiwiZGF5T2ZXZWVrIiwiZ2V0RGF5IiwiZGlmZiIsImdldERhdGUiLCJzdW5kYXkiLCJzZXREYXRlIiwic2V0SG91cnMiLCJzZWxlY3RlZFNlcnZpY2VJZCIsInNldFNlbGVjdGVkU2VydmljZUlkIiwic2VsZWN0ZWRTdGFmZklkIiwic2V0U2VsZWN0ZWRTdGFmZklkIiwiZmV0Y2hlZFNsb3RzIiwic2V0RmV0Y2hlZFNsb3RzIiwiaXNTYXZpbmdBdmFpbGFiaWxpdHkiLCJzZXRJc1NhdmluZ0F2YWlsYWJpbGl0eSIsInNhdmVkQXZhaWxhYmlsaXR5Iiwic2V0U2F2ZWRBdmFpbGFiaWxpdHkiLCJwZW5kaW5nQXZhaWxhYmlsaXR5QWRkaXRpb25zIiwic2V0UGVuZGluZ0F2YWlsYWJpbGl0eUFkZGl0aW9ucyIsImVycm9yIiwic2V0RXJyb3IiLCJhbGxTZXJ2aWNlcyIsImZsYXRNYXAiLCJjYXRlZ29yeSIsIm1hcCIsInNlcnZpY2UiLCJjYXRlZ29yeU5hbWUiLCJuYW1lIiwic2VsZWN0ZWRTZXJ2aWNlIiwiZmluZCIsInMiLCJpZCIsInNlcnZpY2VBdmFpbCIsImF2YWlsIiwic2VydmljZUlkIiwid2Vla1N0YXJ0IiwiZXhwYW5kZWRTbG90cyIsInNlcnZpY2VBdmFpbGFiaWxpdHkiLCJzdGFydERhdGUiLCJob3Jpem9uRGF5cyIsImluY2x1ZGVQYXN0U2xvdHMiLCJncm91cGVkU2xvdHMiLCJ3ZWVrRGF5cyIsImRheXMiLCJpIiwiZGF0ZSIsInB1c2giLCJob3VycyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJzbG90c0J5RGF5QW5kSG91ciIsImdyb3VwZWQiLCJhbGxTbG90cyIsIk9iamVjdCIsInZhbHVlcyIsImZsYXQiLCJmb3JFYWNoIiwic2xvdCIsInNsb3REYXRlIiwic3RhcnREYXRlVGltZSIsImRhdGVLZXkiLCJob3VyIiwiaG91cjEyIiwiaG91ck51bSIsInBhcnNlSW50IiwiaXNJbkN1cnJlbnRXZWVrIiwic29tZSIsImRheSIsImRheUtleSIsImlzRHVwbGljYXRlIiwiZXhpc3RpbmciLCJzdGFmZklkIiwicGVuZGluZyIsImFscmVhZHlQZW5kaW5nIiwic3RhcnRzV2l0aCIsImZpbHRlciIsInN0YWZmTWVtYmVyIiwiZW5kRGF0ZVRpbWUiLCJnZXRUaW1lIiwiZHVyYXRpb25NaW51dGVzIiwic3RhZmZOYW1lIiwic3RhZmZDb2xvciIsImNvbG9yIiwidG9JU09TdHJpbmciLCJkYXlMYWJlbCIsIndlZWtkYXkiLCJuYXZpZ2F0ZVdlZWsiLCJkaXJlY3Rpb24iLCJuZXdEYXRlIiwiaGFuZGxlRW1wdHlTbG90Q2xpY2siLCJzZXJ2aWNlU3RhZmYiLCJtZW1iZXIiLCJhY3RpdmUiLCJzdGFmZklkcyIsImluY2x1ZGVzIiwic3RhZmZUb1Byb2Nlc3MiLCJtIiwiQm9vbGVhbiIsImFsbFBlbmRpbmciLCJldmVyeSIsInRvRGF0ZVN0cmluZyIsInByZXYiLCJpc1NlbGVjdGVkU3RhZmYiLCJuZXdBZGRpdGlvbnMiLCJoYW5kbGVTYXZlQXZhaWxhYmlsaXR5Iiwic3VwYWJhc2UiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwiYXV0aFRva2VuIiwiYWNjZXNzX3Rva2VuIiwiRXJyb3IiLCJhbGxBdmFpbGFiaWxpdHkiLCJ0YXJnZXREYXRlIiwidGFyZ2V0SG91ciIsIndlZWtkYXlOYW1lIiwidG9Mb3dlckNhc2UiLCJzdGFydFRpbWUiLCJTdHJpbmciLCJwYWRTdGFydCIsInN0YXJ0TWludXRlcyIsImVuZE1pbnV0ZXMiLCJlbmRIb3VyIiwiTWF0aCIsImZsb29yIiwiZW5kTWluIiwiZW5kVGltZSIsInN0YWZmQXZhaWxhYmlsaXR5Iiwic2xvdHMiLCJzbG90RXhpc3RzIiwibm93IiwicmFuZG9tIiwic2F2ZVJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YWlsYWJpbGl0eSIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJoYW5kbGVDb250aW51ZSIsInNhdmVTdWNjZXNzIiwicmVzdWx0IiwibWFwUGVuZGluZ1RvU2VydmljZUF2YWlsYWJpbGl0eSIsInNlcnZpY2VzTmVlZGluZ0F2YWlsYWJpbGl0eSIsInNlcnZpY2VEZWYiLCJzdGFmZkVudHJ5Iiwic3RhZmZNYXAiLCJNYXAiLCJoYXMiLCJzZXQiLCJnZXQiLCJlbnRyaWVzIiwiaGFuZGxlRmlsbFRlc3REYXRhIiwidGVzdERhdGEiLCJyZXNwb25zZSIsIm1vbnRoWWVhciIsIm1vbnRoIiwieWVhciIsImRpdiIsImNsYXNzTmFtZSIsImFyaWEtbGFiZWxsZWRieSIsImhlYWRlciIsInNwYW4iLCJhcmlhLWhpZGRlbiIsImgyIiwicCIsInNlbGVjdCIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwidGFyZ2V0Iiwib3B0aW9uIiwicHJpY2VDZW50cyIsInRvRml4ZWQiLCJzdHJvbmciLCJTdGFmZlBpbGwiLCJsYWJlbCIsIm9uQ2xpY2siLCJ2YXJpYW50IiwiZGlzYWJsZWQiLCJpc0xvYWRpbmciLCJoMyIsImlkeCIsImhvdXJMYWJlbCIsImRheUlkeCIsInNsb3RzRm9ySG91ciIsImlzUGVuZGluZyIsImJ1dHRvbiIsInR5cGUiLCJzbG90RGF0ZUtleSIsInBlbmRpbmdEYXRlS2V5IiwidW5kZWZpbmVkIiwic3R5bGUiLCJib3JkZXJDb2xvciIsImJhY2tncm91bmRDb2xvciIsInRpdGxlIiwibWludXRlIiwiaW50ZW50Iiwicm9sZSIsIkFkZEF2YWlsYWJpbGl0eU1vZGFsIiwib25TZWxlY3RTdGFmZiIsIm9uQ2FuY2VsIiwiaXNTYXZpbmciLCJzdGFydFRpbWVTdHIiLCJlbmRUaW1lU3RyIiwiYm94U2hhZG93Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/onboarding/availability-step.tsx\n"));

/***/ })

});